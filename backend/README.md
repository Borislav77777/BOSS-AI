# Boss AI Platform - Backend

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Backend

Backend –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –º–æ–¥—É–ª—å–Ω–æ–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
backend/
‚îú‚îÄ‚îÄ main/                    # –ì–ª–∞–≤–Ω—ã–π API —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ src/                 # –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ dist/                # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ package.json         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≥–ª–∞–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ tsconfig.json        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript
‚îú‚îÄ‚îÄ ozon-manager/            # Ozon Manager —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ src/                 # –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ Ozon Manager
‚îÇ   ‚îú‚îÄ‚îÄ dist/               # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ data/                # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Ozon Manager
‚îÇ   ‚îú‚îÄ‚îÄ logs/                # –õ–æ–≥–∏ Ozon Manager
‚îÇ   ‚îú‚îÄ‚îÄ package.json         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Ozon Manager
‚îÇ   ‚îî‚îÄ‚îÄ tsconfig.json        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript
‚îú‚îÄ‚îÄ ai-services/             # AI —Å–µ—Ä–≤–∏—Å—ã (–±—É–¥—É—â–µ–µ)
‚îÇ   ‚îú‚îÄ‚îÄ chatgpt/             # ChatGPT –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ claude/              # Claude –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ gemini/              # Gemini –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ shared/                  # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –∏ –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ types/               # –û–±—â–∏–µ —Ç–∏–ø—ã TypeScript
‚îÇ   ‚îú‚îÄ‚îÄ utils/               # –£—Ç–∏–ª–∏—Ç—ã (logger, database, etc.)
‚îÇ   ‚îî‚îÄ‚îÄ middleware/          # –û–±—â–∏–µ middleware
‚îî‚îÄ‚îÄ README.md                # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:**

```bash
cd backend/main
npm install
```

**Ozon Manager:**

```bash
cd backend/ozon-manager
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (.env):**

```env
NODE_ENV=development
PORT=3000
DB_PATH=./data/boss_ai.db
CORS_ORIGIN=http://localhost:3000
LOG_LEVEL=info
```

**Ozon Manager (.env):**

```env
NODE_ENV=development
PORT=4200
DB_PATH=./data/ozon_manager.db
TELEGRAM_BOT_TOKEN=your_bot_token_here
JWT_SECRET=your_jwt_secret_here
```

### 3. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (—Ç–µ—Ä–º–∏–Ω–∞–ª 1):**

```bash
cd backend/main
npm run dev
# –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:3000
```

**Ozon Manager (—Ç–µ—Ä–º–∏–Ω–∞–ª 2):**

```bash
cd backend/ozon-manager
npm run dev
# –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:4200
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ì–ª–∞–≤–Ω—ã–π API —Å–µ—Ä–≤–µ—Ä

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º
- ‚úÖ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ Rate limiting –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ health checks

### Ozon Manager —Å–µ—Ä–≤–∏—Å

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

- ‚úÖ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Ozon –º–∞–≥–∞–∑–∏–Ω–∞–º–∏
- ‚úÖ API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Ozon
- ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### AI Services (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

–ë—É–¥—É—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:

- üîÑ ChatGPT –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- üîÑ Claude –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- üîÑ Gemini –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- üîÑ –ö–∞—Å—Ç–æ–º–Ω—ã–µ AI –º–æ–¥–µ–ª–∏

## üì° API Endpoints

### API Gateway (–ø–æ—Ä—Ç 3000)

```
GET  /                    # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ
GET  /api/health          # Health check
POST /api/auth/telegram/login  # Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
GET  /api/auth/me         # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
POST /api/ozon/*          # –ü—Ä–æ–∫—Å–∏ –∫ Ozon Manager
POST /api/ai/*            # –ü—Ä–æ–∫—Å–∏ –∫ AI Services
```

### Ozon Manager (–ø–æ—Ä—Ç 4200) - —á–µ—Ä–µ–∑ API Gateway

```
GET  /api/ozon/stores           # –°–ø–∏—Å–æ–∫ –º–∞–≥–∞–∑–∏–Ω–æ–≤
POST /api/ozon/stores           # –°–æ–∑–¥–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
PUT  /api/ozon/stores/:name      # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
DELETE /api/ozon/stores/:name    # –£–¥–∞–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
POST /api/ozon/promotions/remove # –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∞–∫—Ü–∏–π
POST /api/ozon/archive/unarchive # –†–∞–∑–∞—Ä—Ö–∏–≤–∞—Ü–∏—è
GET  /api/ozon/logs             # –õ–æ–≥–∏
GET  /api/ozon/scheduler/status  # –°—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
```

## üîå WebSocket Events

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```javascript
const socket = io('http://localhost:3000');

// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Ozon Manager —Å–æ–±—ã—Ç–∏—è
socket.emit('subscribe-ozon', { userId: 'user123' });

// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ AI —Å–æ–±—ã—Ç–∏—è
socket.emit('subscribe-ai', { userId: 'user123' });
```

### –°–æ–±—ã—Ç–∏—è

- `ozon-update` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç Ozon Manager
- `ai-response` - –æ—Ç–≤–µ—Ç—ã –æ—Ç AI —Å–µ—Ä–≤–∏—Å–æ–≤
- `notification` - —Å–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üõ° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã

- ‚úÖ Helmet –¥–ª—è HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ Rate limiting
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ SQL injection –∑–∞—â–∏—Ç–∞

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ production
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

- –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä: `backend/main/logs/`
- Ozon Manager: `backend/ozon-manager/logs/`
- –û–±—â–∏–µ –ª–æ–≥–∏: `backend/shared/logs/`

### –ú–µ—Ç—Ä–∏–∫–∏

- CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã

```bash
cd backend/main
npm run test

cd backend/ozon-manager
npm run test
```

### Integration —Ç–µ—Å—Ç—ã

```bash
npm run test:integration
```

### E2E —Ç–µ—Å—Ç—ã

```bash
npm run test:e2e
```

## üöÄ –î–µ–ø–ª–æ–π

### Production —Å–±–æ—Ä–∫–∞

```bash
# –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
cd backend/main
npm run build

# Ozon Manager
cd backend/ozon-manager
npm run build
```

### PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
pm2 start ecosystem.config.js

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
pm2 monit

# –õ–æ–≥–∏
pm2 logs
```

## üîÑ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –≤ `backend/your-service/`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ `ozon-manager/`
3. –û–±–Ω–æ–≤–∏—Ç–µ `backend/main/src/index.ts`
4. –î–æ–±–∞–≤—å—Ç–µ —Ä–æ—É—Ç—ã –≤ `backend/main/src/routes/`
5. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥—É–ª–∏ –∏–∑ `backend/shared/`:

- `@shared/types` - –æ–±—â–∏–µ —Ç–∏–ø—ã
- `@shared/utils/logger` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `@shared/utils/database` - —Ä–∞–±–æ—Ç–∞ —Å –ë–î

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/API.md)
- [WebSocket —Å–æ–±—ã—Ç–∏—è](docs/WEBSOCKET.md)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](docs/SECURITY.md)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](docs/MONITORING.md)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å PM2: `pm2 status`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

**Boss AI Platform Backend** - –ú–æ–¥—É–ª—å–Ω–∞—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞! üöÄ
