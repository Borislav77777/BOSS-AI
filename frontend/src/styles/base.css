/* Импорт унифицированных тем */
@import "./themes.css";

/* Импорт унифицированных компонентов */
@import "./unified-components.css";

/* stylelint-disable at-rule-no-unknown */
@tailwind base;
@tailwind components;
@tailwind utilities;
/* stylelint-enable at-rule-no-unknown */

/* Отключаем проверку @apply директив */
/* stylelint-disable at-rule-no-unknown */

/* Современные базовые стили с трендами 2025 */
@layer base {
  /* Оптимизированные переходы для смены тем */
  * {
    transition: background-color var(--theme-transition-duration, 0.2s)
        var(--theme-transition-easing, cubic-bezier(0.25, 0.46, 0.45, 0.94)),
      color var(--theme-transition-duration, 0.2s)
        var(--theme-transition-easing, cubic-bezier(0.25, 0.46, 0.45, 0.94)),
      border-color var(--theme-transition-duration, 0.2s)
        var(--theme-transition-easing, cubic-bezier(0.25, 0.46, 0.45, 0.94)),
      box-shadow var(--theme-transition-duration, 0.2s)
        var(--theme-transition-easing, cubic-bezier(0.25, 0.46, 0.45, 0.94)) !important;
  }

  /* Убираем синий цвет при выделении */
  ::selection {
    background: var(--accent) !important;
    color: var(--text) !important;
  }

  /* Фокус по умолчанию без box-shadow (чтобы не было квадратов у иконок) */
  *:focus {
    outline: none !important;
    box-shadow: none !important;
  }

  /* Убираем синий цвет при фокусе на input */
  input:focus {
    outline: none !important;
    box-shadow: 0 0 0 2px var(--accent) !important;
    border-color: var(--border) !important;
  }

  /* Убираем синий цвет при фокусе на textarea */
  textarea:focus {
    outline: none !important;
    box-shadow: 0 0 0 2px var(--accent) !important;
    border-color: var(--border) !important;
  }

  /* Убираем синий цвет при фокусе на select */
  select:focus {
    outline: none !important;
    box-shadow: 0 0 0 2px var(--accent) !important;
    border-color: var(--border) !important;
  }

  /* Явный фокус только для интерактивных элементов формы */
  button:focus,
  input:focus,
  textarea:focus,
  select:focus {
    outline: none !important;
    box-shadow: 0 0 0 2px var(--accent) !important;
  }

  /* div не получает box-shadow на фокусе */
  div:focus {
    outline: none !important;
    box-shadow: none !important;
  }

  /* Убираем синий цвет при выделении текста */
  *::selection {
    background: var(--accent) !important;
    color: var(--text) !important;
  }

  /* Убираем синий цвет при выделении в input */
  input::selection,
  textarea::selection {
    background: var(--accent) !important;
    color: var(--text) !important;
  }

  /* Убираем синий цвет при выделении в select */
  select::selection {
    background: var(--accent) !important;
    color: var(--text) !important;
  }

  /* Убираем синий цвет при выделении в button */
  button::selection {
    background: var(--accent) !important;
    color: var(--text) !important;
  }

  /* Убираем синий цвет при выделении в div */
  div::selection {
    background: var(--accent) !important;
    color: var(--text) !important;
  }

  /* Убираем синий цвет при выделении в span */
  span::selection {
    background: var(--accent) !important;
    color: var(--text) !important;
  }

  /* Убираем синий цвет при выделении в p */
  p::selection {
    background: var(--accent) !important;
    color: var(--text) !important;
  }

  /* Убираем синий цвет при выделении в h1, h2, h3, h4, h5, h6 */
  h1::selection,
  h2::selection,
  h3::selection,
  h4::selection,
  h5::selection,
  h6::selection {
    background: var(--accent) !important;
    color: var(--text) !important;
  }

  /* Убираем синий цвет при выделении в label */
  label::selection {
    background: var(--accent) !important;
    color: var(--text) !important;
  }

  /* Убираем синий цвет при выделении в a */
  a::selection {
    background: var(--accent) !important;
    color: var(--text) !important;
  }

  /* Убираем синий цвет браузера по умолчанию */
  * {
    -webkit-tap-highlight-color: transparent !important;
    -webkit-touch-callout: none !important;
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    -ms-user-select: text !important;
    user-select: text !important;
  }

  /* Убираем синий цвет при выделении в WebKit браузерах */
  ::-webkit-selection {
    background: var(--accent) !important;
    color: var(--text) !important;
  }

  /* Убираем синий цвет при выделении в Mozilla браузерах */
  ::-moz-selection {
    background: var(--accent) !important;
    color: var(--text) !important;
  }

  /* Динамическая ширина сайдбара - перенесено в sidebar.css для избежания дублирования */

  /* Предварительный просмотр цветов */
  .color-preview[data-preview-color] {
    background-color: attr(data-preview-color);
  }

  /* Классы для разных размеров сайдбара */
  .sidebar-width-60 {
    --sidebar-width: 60px;
  }
  .sidebar-width-280 {
    --sidebar-width: 280px;
  }
  .sidebar-width-320 {
    --sidebar-width: 320px;
  }
  .sidebar-width-360 {
    --sidebar-width: 360px;
  }

  /* stylelint-disable-next-line at-rule-no-unknown */
  * {
    @apply border-neutral-800;
  }

  body {
    color: var(--text) !important;
    font-feature-settings: "rlig" 1, "calt" 1, "kern" 1;
    font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
      "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans",
      "Helvetica Neue", sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    letter-spacing: -0.01em;
    line-height: 1.5;
    /* Простой фон без градиентов */
    background-color: var(--background) !important;
    background: var(--background) !important;
    overflow-x: hidden; /* Разрешаем вертикальный скроллинг, блокируем горизонтальный */
    overflow-y: auto; /* Разрешаем вертикальный скроллинг */
    height: 100vh;
    width: 100vw;
    position: relative; /* Убираем fixed позиционирование */
    top: 0;
    left: 0;
  }

  /* Специфичные правила для светлой темы */
  [data-theme="light"] body {
    background-color: #ffffff !important;
    background: #ffffff !important;
    color: #000000 !important;
  }

  /* Специфичные правила для темной темы */
  [data-theme="dark"] body {
    background-color: #000000 !important;
    background: #000000 !important;
    color: #ffffff !important;
  }

  /* Специфичные правила для html и root */
  [data-theme="light"] html,
  [data-theme="light"] #root {
    background-color: #ffffff !important;
    background: #ffffff !important;
  }

  [data-theme="dark"] html,
  [data-theme="dark"] #root {
    background-color: #000000 !important;
    background: #000000 !important;
  }

  /* Современная полоска статуса с Mocha Mousse и неоновыми акцентами 2025 */
  body::after {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(
      90deg,
      var(--primary) 0%,
      var(--secondary) 15%,
      var(--secondary) 30%,
      var(--accent) 45%,
      var(--accent) 60%,
      var(--primary) 75%,
      var(--secondary) 100%
    );
    background-size: 300% 100%;
    /* animation: statusBarFlow 4s ease-in-out infinite; */ /* Отключена анимация статус-бара */
    z-index: 1000;
    box-shadow: 0 2px 12px rgba(139, 69, 19, 0.5),
      0 0 25px rgba(139, 69, 19, 0.3), 0 0 35px rgba(217, 70, 239, 0.2);
  }

  html {
    scroll-behavior: smooth;
    /* Предотвращаем расширение документа от анимаций */
    overflow-x: hidden;
    width: 100%;
    height: 100%;
  }

  /* Корневой элемент приложения */
  #root {
    width: 100vw;
    min-height: 100vh;
    position: relative;
    contain: layout;
  }

  /* Дополнительная защита от скроллинга */
  * {
    box-sizing: border-box;
  }

  /* Полное предотвращение скроллинга от анимаций */
  html,
  body {
    overscroll-behavior: none;
  }

  /* Предотвращаем любые анимации от влияния на layout */
  .animate-smooth-float,
  .animate-gentle-pulse,
  .animate-soft-rotate {
    will-change: transform, opacity;
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
    contain: layout;
  }

  /* Улучшенные стили для всех ползунков */
  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    background: transparent;
    cursor: pointer;
    height: 8px;
    border-radius: 4px;
    background: linear-gradient(
      90deg,
      var(--border) 0%,
      var(--primary) 50%,
      var(--border) 100%
    );
    border: none;
    outline: none;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--primary);
    border: 2px solid var(--background);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    transition: all 0.2s ease;
  }

  input[type="range"]::-webkit-slider-thumb:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--primary);
    border: 2px solid var(--background);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    transition: all 0.2s ease;
    border: none;
  }

  input[type="range"]::-moz-range-thumb:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  input[type="range"]::-moz-range-track {
    height: 8px;
    border-radius: 4px;
    background: linear-gradient(
      90deg,
      var(--border) 0%,
      var(--primary) 50%,
      var(--border) 100%
    );
    border: none;
  }

  /* Простой фон без частиц */
  body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: transparent;
    z-index: -1;
    pointer-events: none;
  }
}
