  /* Прокручиваемая область сервисов в сайдбаре с фейдом и скрытым скроллом */
  .sidebar-services-scroll {
    max-height: 40vh;
    overflow-y: auto;
    position: relative;
    -ms-overflow-style: none;
    -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,0) 0, rgba(0,0,0,1) 16px, rgba(0,0,0,1) calc(100% - 16px), rgba(0,0,0,0) 100%);
    mask-image: linear-gradient(to bottom, transparent 0, black 16px, black calc(100% - 16px), transparent 100%);
  }

  /* В свернутом состоянии убираем маску и ограничения, чтобы ничего не перекрывало кнопки */
  .sidebar-main-container.collapsed .sidebar-services-scroll {
    -webkit-mask-image: none;
    mask-image: none;
    overflow: visible;
    margin-left: -7px;
  }

  /* Убираем padding контейнеров в свернутом состоянии */
  .sidebar-main-container.collapsed .sidebar-services-scroll > div {
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Убираем padding для всех div внутри sidebar-services-scroll в свернутом состоянии */
  .sidebar-main-container.collapsed .sidebar-services-scroll div[class*="p-"] {
    padding: 0 !important;
  }

  /* Hue gradient slider for color picker */
  .hue-gradient-slider {
    background: linear-gradient(to right, #ff0000, #ffff00, #00ff00, #ffffff, #000000, #ff00ff, #ff0000);
  }

  .sidebar-services-scroll::-webkit-scrollbar {
    width: 0;
    height: 0;
    background: transparent;
  }

/* ========================================
   BARSUKOV PLATFORM - ЕДИНАЯ СИСТЕМА КОМПОНЕНТОВ
   ======================================== */
/* Глобальное скрытие скроллбаров (скролл остаётся) */
* {
  -ms-overflow-style: none; /* IE/Edge */
}

/* Глобальное отключение скроллбаров с исключениями */
*::-webkit-scrollbar {
  width: 0;
  height: 0;
  background: transparent;
}

/* Исключения для чата - включаем скроллбары */
.chat-scrollbar::-webkit-scrollbar {
  width: 8px !important;
  height: 8px !important;
  background: transparent;
}

/* Chat dynamic styles */
.chat-messages-with-buttons {
  padding-bottom: var(--chat-buttons-panel-height, 0px);
}

.chat-input-tools-bottom {
  bottom: 10px;
}

/* Отключение браузерной рамки выделения и замена на зеленую тень */
*:focus {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Специально для кнопок */
button:focus,
input:focus,
textarea:focus,
select:focus {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Специально для кнопок в чате */
.chat-buttons-fixed button:focus,
.chat-buttons-fixed button:focus-visible,
.chat-buttons-fixed button:active {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Для кнопок функций чата */
.chat-messages button:focus,
.chat-messages button:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Специально для кнопок функций над полем ввода */
.chat-messages .platform-button-base:focus,
.chat-messages .platform-button-base:focus-visible,
.chat-messages .platform-button-base:active {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Для UnifiedButton в чате */
.chat-messages .unified-button:focus,
.chat-messages .unified-button:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Для всех кнопок в области чата (включая кнопки функций) */
.chat-messages *:focus,
.chat-messages *:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Специально для кнопок функций чата (Boss Ai, ChatGPT и т.д.) */
.chat-messages .platform-button-base,
.chat-messages .platform-button-secondary,
.chat-messages .platform-button-primary {
  outline: none !important;
}

.chat-messages .platform-button-base:focus,
.chat-messages .platform-button-secondary:focus,
.chat-messages .platform-button-primary:focus {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Дополнительные стили для кнопок функций чата */
.platform-button-base:focus,
.platform-button-secondary:focus,
.platform-button-primary:focus {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Специально для кнопок в области чата */
.chat-messages .platform-button-base:focus-visible,
.chat-messages .platform-button-secondary:focus-visible,
.chat-messages .platform-button-primary:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Для всех кнопок в Sidebar (боковой панели) */
.sidebar-container *:focus,
.sidebar-container *:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Специально для кнопок Sidebar */
.sidebar-service-button,
.sidebar-footer-button,
.sidebar-create-button,
.sidebar-toggle-button {
  outline: none !important;
}

.sidebar-service-button:focus,
.sidebar-footer-button:focus,
.sidebar-create-button:focus,
.sidebar-toggle-button:focus {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Для всех кнопок в настройках */
.settings-container *:focus,
.settings-container *:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Для всех кнопок в Workspace */
.workspace-container *:focus,
.workspace-container *:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Для всех кнопок в виджетах */
.widgets-container *:focus,
.widgets-container *:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Универсальные стили для всех platform-button */
.platform-button-base,
.platform-button-secondary,
.platform-button-primary {
  outline: none !important;
}

.platform-button-base:focus,
.platform-button-secondary:focus,
.platform-button-primary:focus,
.platform-button-base:focus-visible,
.platform-button-secondary:focus-visible,
.platform-button-primary:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important;
}

/* Активные состояния для кнопок в чате - зеленое свечение */
.platform-button-base.active,
.platform-button-secondary.active,
.platform-button-primary.active {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.2)) !important;
  border-color: rgba(34, 197, 94, 0.6) !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.4), 0 6px 16px rgba(34, 197, 94, 0.3) !important;
  color: rgba(34, 197, 94, 1) !important;
}

/* Активные состояния для кнопок в области чата */
.chat-messages .platform-button-base.active,
.chat-messages .platform-button-secondary.active,
.chat-messages .platform-button-primary.active {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.2)) !important;
  border-color: rgba(34, 197, 94, 0.6) !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.4), 0 6px 16px rgba(34, 197, 94, 0.3) !important;
  color: rgba(34, 197, 94, 1) !important;
}

/* Активные состояния для кнопок в нижней панели чата */
.chat-buttons-fixed button.active {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.2)) !important;
  border-color: rgba(34, 197, 94, 0.6) !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.4), 0 6px 16px rgba(34, 197, 94, 0.3) !important;
  color: rgba(34, 197, 94, 1) !important;
}

/* Активные состояния для UnifiedButton в чате */
.chat-buttons-fixed .unified-button.active,
.chat-messages .unified-button.active {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.2)) !important;
  border-color: rgba(34, 197, 94, 0.6) !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.4), 0 6px 16px rgba(34, 197, 94, 0.3) !important;
  color: rgba(34, 197, 94, 1) !important;
}

/* Выбранные кнопки функций - зеленое свечение */
.platform-button-base.selected,
.platform-button-secondary.selected,
.platform-button-primary.selected {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.4), rgba(34, 197, 94, 0.3)) !important;
  border-color: rgba(34, 197, 94, 0.7) !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.5), 0 8px 20px rgba(34, 197, 94, 0.4) !important;
  color: rgba(34, 197, 94, 1) !important;
}

/* Усиленные стили для активных кнопок - чтобы заливка не пропадала */
.platform-button-base.active:not(:hover),
.platform-button-secondary.active:not(:hover),
.platform-button-primary.active:not(:hover) {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.2)) !important;
  border-color: rgba(34, 197, 94, 0.6) !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.4), 0 6px 16px rgba(34, 197, 94, 0.3) !important;
  color: rgba(34, 197, 94, 1) !important;
}

.chat-messages .platform-button-base.active:not(:hover),
.chat-messages .platform-button-secondary.active:not(:hover),
.chat-messages .platform-button-primary.active:not(:hover) {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.2)) !important;
  border-color: rgba(34, 197, 94, 0.6) !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.4), 0 6px 16px rgba(34, 197, 94, 0.3) !important;
  color: rgba(34, 197, 94, 1) !important;
}

.chat-buttons-fixed button.active:not(:hover),
.chat-buttons-fixed .unified-button.active:not(:hover) {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.2)) !important;
  border-color: rgba(34, 197, 94, 0.6) !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.4), 0 6px 16px rgba(34, 197, 94, 0.3) !important;
  color: rgba(34, 197, 94, 1) !important;
}

/* Кнопка поиска в интернете - зеленое свечение */
.chat-buttons-fixed .unified-button[title="Поиск в интернете"]:hover,
.chat-buttons-fixed .unified-button[title="Поиск в интернете"]:focus {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.1)) !important;
  border-color: rgba(34, 197, 94, 0.5) !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3), 0 4px 12px rgba(34, 197, 94, 0.2) !important;
  color: rgba(34, 197, 94, 0.9) !important;
}

/* Стили кнопок внизу как в свернутой левой панели */
.chat-buttons-fixed .unified-button {
  background: transparent !important;
  color: var(--text) !important;
  border: none !important;
  border-radius: 8px !important;
  padding: 8px !important;
  min-width: 40px;
  min-height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

/* Жестко убираем рамки и тени у UnifiedButton отправки */
.chat-send-button,
.chat-send-button:hover,
.chat-send-button:active,
.chat-send-button:focus {
  border: none !important;
  box-shadow: none !important;
}

.chat-buttons-fixed .unified-button:hover {
  background: var(--button-primary) !important;
  color: #ffffff !important;
  border-color: var(--button-primary) !important;
  box-shadow: 0 2px 8px var(--success-hover);
  transform: translateY(-1px);
}

.chat-buttons-fixed .unified-button.active {
  background: var(--button-primary) !important;
  color: var(--button-primary-text) !important;
  border-color: var(--border) !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

  /* Градиентные разделители убраны из кнопок - они должны быть только между секциями */

  /* Стили для текста Boss Ai */
  .boss-ai-text {
    letter-spacing: 0.3em;
    padding: 0; /* Убираем все отступы */
    margin: 0 0 0 2.5em; /* Сдвигаем правее на пол корпуса */
    white-space: nowrap; /* prevent line breaks so it stays on one line */
    word-break: keep-all;
    display: flex;
    align-items: center;
    justify-content: center; /* Возвращаем центрирование */
    height: 100%;
    width: 100%;
    text-align: center; /* Возвращаем центрирование */
    line-height: 1;
    color: #ffffff !important; /* Белый цвет для темной темы */
    /* Добавляем тени для текста */
    text-shadow:
      0 2px 4px rgba(0, 0, 0, 0.3),
      0 1px 2px rgba(0, 0, 0, 0.2),
      0 0 8px rgba(0, 0, 0, 0.1);
    transition: all 0.2s ease;
  }

  /* Черный цвет для светлой темы */
  .light-theme .boss-ai-text,
  [data-theme="light"] .boss-ai-text,
  body.light-theme .boss-ai-text {
    color: #000000 !important; /* Черный цвет для светлой темы */
    text-shadow:
      0 2px 4px rgba(255, 255, 255, 0.3),
      0 1px 2px rgba(255, 255, 255, 0.2),
      0 0 8px rgba(255, 255, 255, 0.1);
  }

  /* Убираем зеленое выделение и добавляем прозрачное пространство */
  .sidebar-header .sidebar-logo {
    background: transparent !important;
    border: none !important;
    padding: 0; /* Убираем все отступы */
    margin: 0; /* Убираем все отступы */
    display: flex;
    align-items: center;
    justify-content: center;
    height: 3rem; /* Фиксированная высота для центрирования */
    width: 100%;
    /* Добавляем тени для глубины */
    box-shadow:
      0 2px 4px rgba(0, 0, 0, 0.1),
      0 1px 2px rgba(0, 0, 0, 0.06),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    transition: all 0.2s ease;
  }

  .sidebar-header .sidebar-logo:hover {
    background: rgba(255, 255, 255, 0.05) !important;
    transform: scale(1.05);
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.15),
      0 2px 6px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  .sidebar-header .sidebar-logo:active {
    transform: scale(0.98);
    box-shadow:
      0 1px 3px rgba(0, 0, 0, 0.2),
      0 1px 2px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  /* Специфичный класс для кнопки логотипа с фиксированными размерами */
  .sidebar-logo-button {
    background: transparent !important; /* Прозрачный фон */
    width: 44px !important; /* Оптимальный размер */
    height: 44px !important; /* Оптимальный размер */
    min-width: 44px;
    min-height: 44px;
    border-radius: 12px; /* Увеличиваем радиус */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0; /* Убираем все отступы */
    margin: 0; /* Убираем все отступы */
    margin-top: 0 !important; /* Убираем отступ сверху */
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    z-index: 1;
    /* Добавляем тени для глубины */
    box-shadow:
      0 2px 4px rgba(0, 0, 0, 0.1),
      0 1px 2px rgba(0, 0, 0, 0.06),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  .sidebar-logo-button:hover {
    transform: scale(1.1);
    background: rgba(255, 255, 255, 0.1) !important; /* Легкое затемнение при hover */
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.15),
      0 2px 6px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  .sidebar-logo-button:active {
    transform: scale(0.95);
    background: rgba(255, 255, 255, 0.05) !important; /* Еще более легкое затемнение при нажатии */
    box-shadow:
      0 1px 3px rgba(0, 0, 0, 0.2),
      0 1px 2px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  /* Черный цвет для светлой темы в кнопке логотипа */
  .light-theme .sidebar-logo-button .sidebar-logo-text,
  [data-theme="light"] .sidebar-logo-button .sidebar-logo-text,
  body.light-theme .sidebar-logo-button .sidebar-logo-text {
    color: #000000 !important; /* Черный цвет для светлой темы */
    text-shadow: 0 1px 2px rgba(255, 255, 255, 0.3); /* Белая тень для светлой темы */
  }

  /* ========================================
     ОСНОВНЫЕ КОМПОНЕНТЫ ПЛАТФОРМЫ
   ======================================== */

  /* Улучшенная типографика для всех компонентов */
  * {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
    font-feature-settings: "rlig" 1, "calt" 1, "kern" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    letter-spacing: -0.01em;
  }


  /* Error page styles */
  .error-container {
    background: var(--background);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
  }

  .error-title {
    color: var(--text);
    font-size: 2rem;
    font-weight: 700;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.02em;
    line-height: 1.2;
    margin-bottom: 1rem;
  }

  .error-message {
    color: var(--text-secondary);
    font-size: 1.125rem;
    font-weight: 400;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.01em;
    line-height: 1.5;
    margin-bottom: 2rem;
    text-align: center;
    max-width: 600px;
  }

  /* Error button styles - используем unified-button */
  .error-button {
    /* Стили перенесены в unified-button */
    display: none;
  }

  /* ========================================
     КОМПОНЕНТЫ НАСТРОЕК
     ======================================== */


  /* Boolean Setting Checkbox */
  .boolean-checkbox-checked {
    background: var(--button-primary);
    border-color: var(--border);
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
  }

  .boolean-checkbox-unchecked {
    background: var(--surface);
    border-color: var(--border);
  }

  .boolean-checkbox-icon {
    color: var(--background);
  }

  .boolean-checkbox-label {
    color: var(--text-secondary);
    font-weight: 500;
  }

  /* Color Info Component */
  .color-info-label {
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-weight: 500;
  }

  .color-info-value {
    color: var(--text);
    font-family: monospace;
    font-size: 0.875rem;
  }

  /* Color Preview */
  .color-preview-dynamic-bg {
    background-color: var(--background);
    border: 1px solid var(--border);
    border-radius: 6px;
    width: 24px;
    height: 24px;
  }

  .color-preset-dynamic {
    background-color: var(--background);
    border: 1px solid var(--border);
    border-radius: 6px;
    width: 32px;
    height: 32px;
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .color-preset-dynamic:hover {
    transform: scale(1.1);
  }

  .color-preset-dynamic.selected {
    border-color: var(--border);
    box-shadow: 0 0 0 2px var(--primary);
  }

  /* Setting Checkbox States */
  .setting-checkbox-checked {
    background: var(--button-primary);
    border-color: var(--border);
  }

  .setting-checkbox-unchecked {
    background: var(--surface);
    border-color: var(--border);
  }

  /* ========================================
     THEME SELECTOR COMPONENTS
     ======================================== */

  .theme-selector-indicator-positioned {
    left: var(--indicator-position, 0%);
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 12px;
    height: 12px;
    background: var(--button-primary);
    border: 2px solid var(--background);
    border-radius: 50%;
    box-shadow: 0 0 0 1px var(--border);
  }

  .theme-selector-saturation-indicator-positioned {
    left: var(--saturation-position, 0%);
    top: var(--lightness-position, 0%);
    position: absolute;
    width: 12px;
    height: 12px;
    background: var(--button-primary);
    border: 2px solid var(--background);
    border-radius: 50%;
    box-shadow: 0 0 0 1px var(--border);
  }

  .theme-selector-hue-indicator-positioned {
    left: var(--hue-position, 0%);
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 12px;
    height: 12px;
    background: var(--button-primary);
    border: 2px solid var(--background);
    border-radius: 50%;
    box-shadow: 0 0 0 1px var(--border);
  }

  /* ========================================
     САЙДБАР КОМПОНЕНТЫ
     ======================================== */

  .sidebar-main-container {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 20px;
    -webkit-backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
    transition: all 0.7s cubic-bezier(0.23, 1, 0.32, 1);
    overflow: visible !important;
    position: relative;
    z-index: 2;
    min-width: 0;
    max-width: 100vw;
    margin: 0;
    width: var(--sidebar-width, 280px);
    flex-shrink: 0;
  }

/* Стили для свернутого состояния сайдбара */
.sidebar-collapsed {
  width: 60px;
  min-width: 60px;
  max-width: 60px;
  transition: all 0.7s cubic-bezier(0.23, 1, 0.32, 1);
  opacity: 1;
  transform: scale(1) translateX(-20px); /* Сдвигаем свернутую панель влево на 20px */
}

/* Плавное исчезновение свернутой панели при раскрытии */
.sidebar-main-container:not(.collapsed) {
  opacity: 1;
  transform: scale(1);
  transition: all 0.7s cubic-bezier(0.23, 1, 0.32, 1);
}

.sidebar-main-container.collapsed {
  opacity: 0.95;
  transform: scale(0.98); /* Без сдвига влево, чтобы не попадать под левую рамку */
  transition: all 0.7s cubic-bezier(0.23, 1, 0.32, 1);
}

/* Промежуточное состояние для плавного перехода */
.sidebar-main-container {
  transition: width 0.7s cubic-bezier(0.23, 1, 0.32, 1),
              min-width 0.7s cubic-bezier(0.23, 1, 0.32, 1),
              max-width 0.7s cubic-bezier(0.23, 1, 0.32, 1),
              opacity 0.7s cubic-bezier(0.23, 1, 0.32, 1),
              transform 0.7s cubic-bezier(0.23, 1, 0.32, 1);
}

/* Стили для развернутого состояния сайдбара */
.sidebar-expanded {
  width: var(--sidebar-width, 280px) !important;
  min-width: 200px !important;
    max-width: 500px !important;
}

/* Стили для App.tsx */
.sidebar-container {
  height: 100vh;
  flex-shrink: 0;
}

.main-content {
  min-width: 0;
  flex-shrink: 1;
}

.full-height {
  height: 100vh;
}

.expanded-tabs-container {
  --expanded-height: 0px;
}

  .sidebar-header {
    background: transparent;
    border-color: transparent;
    padding: -0.5rem; /* Уменьшаем отступы */
    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    position: relative;
  }

  .sidebar-logo {
    background: linear-gradient(90deg, var(--button-primary) 0%, var(--button-primary) 15%, rgba(255,255,255,0.1) 40%, transparent 100%);
    width: auto;
    min-width: 32px;
    height: 32px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    padding-left: 8px;
    padding-right: 40px;
    /* 3D обводка как у кнопки справки */
    box-shadow:
      0 1px 3px rgba(0, 0, 0, 0.12),
      0 1px 2px rgba(0, 0, 0, 0.24),
      inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.1);
    position: relative;
    z-index: 1;
    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    cursor: pointer;
  }

  /* Центрирование логотипа в свернутом состоянии */
  .sidebar-main-container.collapsed .sidebar-logo {
    margin: 0 auto;
    width: 32px;
    height: 32px;
    padding: 0;
    background: var(--button-primary);
    justify-content: center;
    transform: translateX(1px) scale(1.05) translateY(8px); /* Плавный сдвиг вниз вместо margin-top */
    transition: all 0.7s cubic-bezier(0.23, 1, 0.32, 1);
  }

  /* Плавное возвращение логотипа при раскрытии */
  .sidebar-main-container:not(.collapsed) .sidebar-logo {
    margin: 0;
    margin-top: 0;
    width: auto;
    min-width: 32px;
    padding-left: 8px;
    padding-right: 65px;
    background: linear-gradient(90deg, var(--button-primary) 0%, var(--button-primary) 15%, rgba(255,255,255,0.1) 40%, transparent 100%);
    justify-content: flex-start;
    transform: translateX(0) scale(1) translateY(0);
    transition: all 0.7s cubic-bezier(0.23, 1, 0.32, 1);
  }

  /* Скрытие текста в свернутом состоянии */
  .sidebar-main-container.collapsed .sidebar-title {
    opacity: 0;
    transform: translateY(-1.3px) translateX(-15px) scale(0.95);
    transition: all 0.7s cubic-bezier(0.23, 1, 0.32, 1);
  }

  /* Плавное появление текста при раскрытии */
  .sidebar-main-container:not(.collapsed) .sidebar-title {
    opacity: 1;
    transform: translateY(-1.3px) translateX(0) scale(1);
    transition: all 0.7s cubic-bezier(0.23, 1, 0.32, 1);
  }

  .sidebar-logo-text {
    color: #ffffff !important; /* Белый цвет для темной темы */
    font-weight: 700;
    font-size: 1.125rem;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    transition: all 0.2s ease;
  }

  /* Черный цвет для светлой темы */
  .light-theme .sidebar-logo-text,
  [data-theme="light"] .sidebar-logo-text,
  body.light-theme .sidebar-logo-text {
    color: #000000 !important; /* Черный цвет для светлой темы */
    text-shadow: 0 1px 2px rgba(255, 255, 255, 0.3); /* Белая тень для светлой темы */
  }

  /* Эффект увеличения для буквы B при hover */
  .sidebar-logo:hover .sidebar-logo-text {
    transform: scale(1.1);
  }

  /* Эффект нажатия для буквы B */
  .sidebar-logo:active .sidebar-logo-text {
    transform: scale(0.95);
  }

  /* Hover эффект для логотипа - увеличение из центра */
  .sidebar-logo:hover {
    transform: scale(1.1);
    box-shadow:
      0 4px 8px rgba(0, 0, 0, 0.15),
      0 2px 4px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.2),
      inset 0 -1px 0 rgba(0, 0, 0, 0.05);
  }

  /* Эффект нажатия для логотипа - уменьшение */
  .sidebar-logo:active {
    transform: scale(0.95);
    box-shadow:
      0 1px 2px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 rgba(0, 0, 0, 0.1),
      inset 0 -1px 0 rgba(255, 255, 255, 0.05);
  }

  .sidebar-title {
    color: var(--text);
    font-size: 1.125rem;
    font-weight: 600;
  }

  /* Центрирование логотипа и текста в развернутом состоянии */
  .sidebar-header:not(.collapsed) .flex.items-center.justify-center {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    position: relative;
  }

  /* Стили для центрированного контента */
  .sidebar-header .flex.items-center {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Отступ между логотипом и текстом */
  .sidebar-header .sidebar-title {
    margin-left: -3.8rem;
  }

  /* Стили для логотипа как кнопки в свернутом виде */
  .sidebar-header button.sidebar-logo {
    background: linear-gradient(90deg, var(--button-primary) 0%, var(--button-primary) 15%, rgba(255,255,255,0.1) 40%, transparent 100%);
    border: none;
    transition: all 0.2s ease;
  }

  .sidebar-header button.sidebar-logo:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  }

  .sidebar-header button.sidebar-logo:active {
    transform: scale(0.95);
  }

  .sidebar-toggle-button {
    background: var(--surface);
    color: var(--text);
    border: none;
    border-radius: 8px;
    padding: 8px;
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .sidebar-toggle-button:hover:not(:disabled) {
    background: var(--hover);
  }

  .sidebar-toggle-icon {
    color: var(--text-secondary);
    width: 16px;
    height: 16px;
  }

  .sidebar-nav {
    background: transparent;
    padding: 0.75rem;
    list-style: none;
    margin: 0;
  }

  /* Убираем маркеры для всех списков в сайдбаре */
  .sidebar-nav li,
  .sidebar-services li,
  .sidebar-workspaces-scroll li {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .sidebar-nav-item {
    background: var(--card-bg);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: var(--radius); /* Используем переменную платформы */
    padding: 12px 16px; /* Оптимизированные отступы */
    transition: all var(--transition); /* Используем переменную платформы */
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 12px; /* Улучшенное расстояние между элементами */
    width: 100%;
    margin-bottom: 8px; /* Оптимизированное расстояние между блоками */
    -webkit-user-select: none;
    user-select: none;
    min-height: 48px; /* Минимальная высота для лучшего клика */
  }

  .sidebar-nav-item.compact {
    padding: calc(var(--spacing-3) - 4px) calc(var(--spacing-4) - 4px);
    margin-bottom: calc(var(--spacing-2) - 4px);
  }

  .sidebar-nav-item:hover {
    box-shadow: var(--shadow-lg); /* Используем переменную платформы */
    transform: translateY(-1px); /* Добавляем эффект подъема */
    border-color: var(--border); /* Подсвечиваем границу */
  }

  .sidebar-nav-item:active {
    transform: translateY(0);
    box-shadow: var(--shadow-md);
  }

  .sidebar-nav-item-active {
    background: var(--button-primary);
    color: var(--button-primary-text);
    border-color: var(--border);
    box-shadow: 0 2px 8px var(--success-hover);
  }

  .sidebar-nav-item-active .sidebar-nav-text {
    color: var(--button-primary-text) !important;
  }

  .sidebar-nav-icon {
    color: var(--text);
    width: 16px;
    height: 16px;
    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .sidebar-nav-text {
    color: var(--text);
    font-weight: 500;
    font-size: 0.875rem;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.4;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
  }

  .sidebar-services {
    background: transparent;
    padding: 0.75rem;
  }

  .sidebar-services-title {
    color: var(--text-secondary);
    font-weight: 500;
    font-size: 0.875rem;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.4;
    margin-bottom: 0.75rem;
  }

/* Компактная кнопка "+" в заголовке проектов - унифицирована с другими кнопками */
.sidebar-create-button {
  background: var(--card-bg);
  color: var(--text);
  border: none;
  border-radius: 10px;
  width: 40px;
  height: 40px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 0;
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
  cursor: pointer;
  -webkit-user-select: none;
  user-select: none;
}

.sidebar-create-button:hover {
  background: var(--button-primary);
  color: var(--background);
  border-color: var(--border);
  box-shadow: var(--shadow-md); /* Добавляем тень при наведении */
  transform: translateY(-1px); /* Добавляем эффект подъема */
}

.sidebar-create-button:active {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

/* Стили для свернутого состояния кнопки создания */
.sidebar-create-button.w-full {
  width: 100%;
  height: 40px; /* Увеличиваем высоту для лучшего клика */
  border-radius: var(--radius);
}

/* Унифицированные стили для свернутого состояния сайдбара */
.sidebar-main-container.collapsed .sidebar-nav-item,
.sidebar-main-container.collapsed .sidebar-service-item,
.sidebar-main-container.collapsed .sidebar-service-button {
  padding: var(--spacing-3); /* Компактный padding для свернутого состояния */
  justify-content: center !important; /* Центрируем содержимое */
  align-items: center !important; /* Центрируем по вертикали */
  min-height: 40px; /* Минимальная высота для кликабельности */
  margin: 0 auto !important; /* Центрируем кнопки */
  width: 40px !important; /* Фиксированная ширина */
    position: relative;
    z-index: 3; /* Поверх декоративных слоёв */
}

.sidebar-main-container.collapsed .sidebar-nav-item:hover,
.sidebar-main-container.collapsed .sidebar-service-item:hover,
.sidebar-main-container.collapsed .sidebar-service-button:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 8px var(--success-hover);
}

  /* Стили для иконок в свернутом состоянии */



/* Унификация иконок в свернутом состоянии - делаем их одинаковыми по форме */
.sidebar-main-container.collapsed .sidebar-nav-icon,
.sidebar-main-container.collapsed .sidebar-service-item .icon,
.sidebar-main-container.collapsed .sidebar-service-button .icon,
.sidebar-main-container.collapsed .sidebar-footer-button .icon {
  width: 20px !important;
  height: 20px !important;
  min-width: 20px;
  min-height: 20px;
  max-width: 20px;
  max-height: 20px;
  object-fit: contain;
  display: block;
}

/* Унификация проектов и кнопки создания в свернутом состоянии */
.sidebar-main-container.collapsed .sidebar-service-button.compact,
.sidebar-main-container.collapsed .sidebar-create-button {
  width: 40px !important;
  height: 40px !important;
  min-width: 40px;
  min-height: 40px;
  max-width: 40px;
  max-height: 40px;
  padding: 8px !important;
  justify-content: center !important;
  align-items: center !important;
  display: flex !important;
  margin: 0 auto !important;
  border-radius: 8px !important;
  background: var(--surface) !important;
  color: var(--text) !important;
  border: 1px solid var(--border) !important;
  transition: all 0.2s ease !important;
}

/* Стили для иконок внутри проектов и кнопки создания в свернутом состоянии */
.sidebar-main-container.collapsed .sidebar-service-button.compact .icon,
.sidebar-main-container.collapsed .sidebar-service-button.compact svg,
.sidebar-main-container.collapsed .sidebar-create-button span {
  width: 20px !important;
  height: 20px !important;
  min-width: 20px;
  min-height: 20px;
  max-width: 20px;
  max-height: 20px;
  object-fit: contain;
  display: block;
  font-size: 16px;
  line-height: 1;
}

/* Hover эффекты для проектов и кнопки создания в свернутом состоянии */
.sidebar-main-container.collapsed .sidebar-service-button.compact:hover,
.sidebar-main-container.collapsed .sidebar-create-button:hover {
  background: var(--button-primary) !important; /* Синий фон как в развернутой панели */
  color: #ffffff !important; /* Белый текст как в развернутой панели */
  border-color: var(--button-primary) !important;
  box-shadow: 0 2px 8px var(--success-hover);
  transform: translateY(-1px); /* Только подъём, без горизонтального сдвига */
}

/* Активное состояние для кнопок сервисов в свернутом состоянии */
.sidebar-main-container.collapsed .sidebar-service-button.compact.active {
  background: var(--button-primary) !important; /* Синий фон как в развернутой панели */
  color: var(--button-primary-text) !important; /* Белый текст как в развернутой панели */
  border-color: var(--border) !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

/* Стили для footer кнопок в свернутом состоянии */
.sidebar-main-container.collapsed .sidebar-footer-button {
  background: transparent !important;
  color: var(--text) !important;
  border: none !important;
  border-radius: 10px !important;
  padding: 10px !important;
  width: 40px !important;
  height: 40px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  margin-bottom: 4px !important;
  box-shadow: none !important;
}

.sidebar-main-container.collapsed .sidebar-footer-button:hover {
  background: var(--button-primary) !important; /* Синий фон как в развернутой панели */
  color: #ffffff !important; /* Белый текст как в развернутой панели */
  border-color: var(--button-primary) !important;
  box-shadow: 0 2px 8px var(--success-hover);
  transform: translateY(-1px); /* Только подъём, без горизонтального сдвига */
}

.sidebar-main-container.collapsed .sidebar-footer-button.active {
  background: var(--button-primary) !important; /* Синий фон как в развернутой панели */
  color: var(--button-primary-text) !important; /* Белый текст как в развернутой панели */
  border-color: var(--border) !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

/* Стили для dropdown кнопок в свернутом состоянии */
.sidebar-main-container.collapsed .sidebar-service-dropdown {
  margin-left: -7px; /* Сдвиг влево на 7px для всех вкладок сервисов */
}

.sidebar-main-container.collapsed .sidebar-service-dropdown .sidebar-service-item {
  background: var(--surface) !important;
  color: var(--text) !important;
  border: 1px solid var(--border) !important;
  border-radius: 8px !important;
  padding: 8px !important;
  width: 40px !important;
  height: 40px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  margin-bottom: 4px !important;
}

/* Скрываем текст и показываем только иконки в свернутом состоянии */
.sidebar-main-container.collapsed .sidebar-service-dropdown .sidebar-service-item .service-content {
  display: none !important; /* Скрываем текст в свернутом состоянии */
}

.sidebar-main-container.collapsed .sidebar-service-dropdown .sidebar-service-item .icon {
  display: block !important; /* Показываем иконку */
  margin: 0 auto !important; /* Центрируем иконку */
}

.sidebar-main-container.collapsed .sidebar-service-dropdown .sidebar-service-item:hover:not(.active) {
  background: var(--button-primary) !important; /* Синий фон как в развернутой панели */
  color: #ffffff !important; /* Белый текст как в развернутой панели */
  border-color: var(--button-primary) !important;
  box-shadow: 0 2px 8px var(--success-hover);
  transform: translateY(-1px); /* Только подъём, без горизонтального сдвига */
}

.sidebar-main-container.collapsed .sidebar-service-dropdown .sidebar-service-item.active {
  background: var(--button-primary) !important; /* Синий фон как в развернутой панели */
  color: var(--button-primary-text) !important; /* Белый текст как в развернутой панели */
  border-color: var(--border) !important;
  box-shadow: 0 2px 8px var(--success-hover) !important;
}

.sidebar-main-container.collapsed .sidebar-service-dropdown .sidebar-service-item.active:hover {
  background: var(--button-primary) !important; /* Синий фон как в развернутой панели */
  color: var(--button-primary-text) !important; /* Белый текст как в развернутой панели */
  border-color: var(--border) !important;
  box-shadow: 0 2px 8px var(--success-hover) !important;
  transform: translateY(-1px); /* Только подъём, без горизонтального сдвига */
}

/* Стили для навигационных кнопок в свернутом состоянии */
.sidebar-main-container.collapsed .sidebar-nav-item {
  background: var(--surface) !important;
  color: var(--text) !important;
  border: 1px solid var(--border) !important;
  border-radius: 8px !important;
  padding: 8px !important;
  width: 40px !important;
  height: 40px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  margin: 0 auto 4px auto !important; /* Центрируем кнопки */
}

.sidebar-main-container.collapsed .sidebar-nav-item:hover {
  background: var(--button-primary) !important; /* Синий фон как в развернутой панели */
  color: #ffffff !important; /* Белый текст как в развернутой панели */
  border-color: var(--button-primary) !important;
  box-shadow: 0 2px 8px var(--success-hover);
  transform: translateY(-1px);
}

.sidebar-main-container.collapsed .sidebar-nav-item.active {
  background: var(--button-primary) !important; /* Синий фон как в развернутой панели */
  color: var(--button-primary-text) !important; /* Белый текст как в развернутой панели */
  border-color: var(--border) !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

/* Центрирование контейнеров проектов в свернутом состоянии */
.sidebar-main-container.collapsed .sidebar-nav {
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: flex-start !important;
  gap: 8px !important;
}

.sidebar-main-container.collapsed .sidebar-nav li {
  display: flex !important;
  justify-content: center !important;
  width: 100% !important;
}

  .sidebar-service-item {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: var(--radius); /* Используем переменную платформы */
    padding: 12px 16px; /* Оптимизированные отступы */
    transition: all var(--transition); /* Используем переменную платформы */
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 12px; /* Улучшенное расстояние между элементами */
    width: 100%;
    margin-bottom: 8px; /* Оптимизированное расстояние между блоками */
    -webkit-user-select: none;
    user-select: none;
    min-height: 48px; /* Минимальная высота для лучшего клика */
  }

  .sidebar-service-item:hover {
    box-shadow: var(--shadow-lg); /* Используем переменную платформы */
    transform: translateY(-1px); /* Добавляем эффект подъема */
    border-color: var(--border); /* Подсвечиваем границу */
  }

  .sidebar-service-item:active {
    transform: translateY(0);
    box-shadow: var(--shadow-md);
  }

  .sidebar-service-item-active {
    background: var(--button-primary);
    color: var(--button-primary-text);
    border-color: var(--border);
    box-shadow: 0 2px 8px var(--success-hover);
  }

  .sidebar-service-item-active .service-title,
  .sidebar-service-item-active .service-description {
    color: var(--button-primary-text) !important;
  }

  .sidebar-service-item.active {
    background: var(--button-primary);
    color: var(--button-primary-text);
    border-color: var(--border);
    box-shadow: 0 2px 8px var(--success-hover);
  }

  .sidebar-service-item.active .service-title,
  .sidebar-service-item.active .service-description {
    color: var(--button-primary-text) !important;
  }

  .sidebar-service-item .service-content {
    display: flex;
    flex-direction: column;
    gap: 4px; /* Улучшенное расстояние между заголовком и описанием */
    min-width: 0;
    align-items: flex-start;
  }

  .sidebar-service-item .service-title {
    font-weight: 500;
    font-size: 0.875rem;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.3;
    text-align: left;
  }

  .sidebar-service-item .service-description {
    font-size: 0.75rem;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.4;
    opacity: 0.7;
  }

  .sidebar-service-item .icon {
    width: 16px;
    height: 16px;
    transition: all 0.2s ease;
    flex-shrink: 0;
  }

  /* Стили для свернутых иконок виджетов */
  .widgets-collapsed-icons {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .widgets-collapsed-icons .sidebar-service-item {
    padding: 8px;
    margin-bottom: 0;
    min-height: 40px;
    justify-content: center; /* Центрируем иконки в свернутом состоянии */
  }

  .widgets-collapsed-icons .sidebar-service-item:hover {
    box-shadow: 0 2px 8px var(--success-hover);
    background: var(--button-primary);
    color: #ffffff;
  }

  .widgets-collapsed-icons .sidebar-service-item.active {
    box-shadow: 0 2px 8px var(--success-hover);
    background: var(--button-primary);
    color: var(--button-primary-text);
  }

  .sidebar-service-name {
    color: var(--text);
    font-weight: 500;
    font-size: 0.875rem;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.3;
  }

  .sidebar-service-description {
    color: var(--text-secondary);
    font-size: 0.75rem;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.4;
  }

  /* Sidebar button styles - используем unified-button */
  .sidebar-button {
    /* Стили перенесены в unified-button */
    display: none;
  }

  /* ========================================
     РАБОЧЕЕ ПРОСТРАНСТВО КОМПОНЕНТЫ
     ======================================== */

  /* ========================================
     РАБОЧЕЕ ПРОСТРАНСТВО - ОПТИМИЗИРОВАННЫЕ СТИЛИ
     ======================================== */

  .workspace-container {
    contain: layout;
    transform: translateZ(0);
    will-change: auto;
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 16px;
    -webkit-backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
    transition: all 0.2s ease;
    overflow: visible;
    position: relative;
    z-index: 1;
    min-width: 0;
    max-width: 100vw;
  }

  .workspace-container:hover {
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
  }

  .workspace-container.sidebar-collapsed {
    margin: 0;
  }

  /* Стили для контейнера проектов в сайдбаре */
  .sidebar-projects {
    background: transparent;
    padding: 0.75rem;
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
    position: relative;
    z-index: 2;
  }

  /* Прокручиваемая область списка рабочих пространств в сайдбаре */
  .sidebar-workspaces-scroll {
    max-height: 40vh;
    overflow-y: auto;
  -ms-overflow-style: none; /* IE/Edge */
    position: relative;
    -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,0) 0, rgba(0,0,0,1) 16px, rgba(0,0,0,1) calc(100% - 16px), rgba(0,0,0,0) 100%);
    mask-image: linear-gradient(to bottom, transparent 0, black 16px, black calc(100% - 16px), transparent 100%);
  }
  /* В свернутом состоянии убираем маску и ограничения, чтобы рамка не перекрывала проекты */
  .sidebar-main-container.collapsed .sidebar-workspaces-scroll {
    -webkit-mask-image: none;
    mask-image: none;
    overflow: visible;
  }

  /* Поверх декоративных слоев в свернутом состоянии для кнопки создания */
  .sidebar-main-container.collapsed .sidebar-create-button {
    position: relative;
    z-index: 3;
  }
  /* расстояние между проектами: учитываем разметку UL > LI */
  .sidebar-workspaces-scroll ul > li + li {
    margin-top: 8px; /* Уменьшаем расстояние между проектами */
  }

.sidebar-workspaces-scroll::-webkit-scrollbar { /* Chrome/Safari */
  width: 0;
  height: 0;
  background: transparent;
}

/* Стили для прокрутки в AI юристе - webkit-only for compatibility */

.sidebar-scrollbar::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.sidebar-scrollbar::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 3px;
}

.sidebar-scrollbar::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
  transition: background 0.2s ease;
}

.sidebar-scrollbar::-webkit-scrollbar-thumb:hover {
  background: var(--text-secondary);
}

  /* Убраны before/after фейды для проектов по требованию */

  /* Визуальный стиль проектов в сайдбаре — как большие сервисные кнопки */
  .sidebar-project-item {
    background: var(--card-bg);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 12px 16px;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
    min-height: 48px;
  }
  .sidebar-project-item:hover {
    background: var(--button-primary);
    color: #ffffff;
    border-color: var(--border);
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    transform: translateY(-1px);
  }
  .sidebar-project-item.active {
    background: var(--button-primary);
    color: var(--button-primary-text);
    border-color: var(--border);
    box-shadow: 0 2px 8px var(--success-hover);
  }

  .sidebar-project-item.active .sidebar-project-title {
    color: var(--button-primary-text) !important;
  }
  .sidebar-project-title {
    font-size: 0.875rem;
    font-weight: 500;
    color: inherit;
    line-height: 1.2;
  }
  .sidebar-project-btn {
    background: transparent;
    border: none !important;
    box-shadow: none;
    padding: 0;
    flex: 1;
    cursor: pointer;
    color: inherit;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Стили для кнопок проектов в свернутом состоянии */
  .sidebar-main-container.collapsed .sidebar-project-btn {
    background: transparent !important;
    color: var(--text) !important;
    border: none !important;
    border-radius: 8px !important;
    padding: 8px !important;
    width: 40px !important;
    height: 40px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    box-shadow: none !important;
  }

  .sidebar-main-container.collapsed .sidebar-project-btn:hover {
    background: var(--button-primary) !important; /* Синий фон как в развернутой панели */
    color: #ffffff !important; /* Белый текст как в развернутой панели */
    border: none !important;
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    transform: translateY(-1px);
  }

  .sidebar-main-container.collapsed .sidebar-project-btn.active {
    background: var(--button-primary) !important; /* Синий фон как в развернутой панели */
    color: var(--button-primary-text) !important; /* Белый текст как в развернутой панели */
    border: none !important;
    box-shadow: 0 2px 8px var(--success-hover);
  }

  /* Гарантируем курсор-указатель на всём содержимом кнопки проекта */
  .sidebar-project-btn *,
  .sidebar-service-button .service-content,
  .sidebar-service-button .service-title {
    cursor: pointer;
  }

  /* Убеждаемся что все элементы внутри кнопки наследуют цвет при hover */
  .sidebar-service-button:hover .sidebar-project-btn,
  .sidebar-service-button:hover .sidebar-project-btn *,
  .sidebar-service-button:hover .service-content,
  .sidebar-service-button:hover .service-title {
    color: inherit;
  }

  /* Отключаем выделение текста для всех элементов кнопки */
  .sidebar-service-button,
  .sidebar-service-button *,
  .sidebar-project-btn,
  .sidebar-project-btn *,
  .service-content,
  .service-title {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  .sidebar-create-button {
    background: var(--card-bg);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 10px;
    width: 40px;
    height: 40px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 0;
    transition: all 0.2s ease;
  }
  .sidebar-create-button:hover {
    background: var(--button-primary);
    color: var(--background);
    border-color: var(--border);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    transform: translateY(-1px);
  }

  .sidebar-create-button:active {
    transform: translateY(0);
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }

  .sidebar-create-button:focus {
    outline: none;
    box-shadow: 0 0 0 2px var(--focus-ring);
  }

  .workspace-grid {
    contain: layout;
    transform: translateZ(0);
    will-change: auto;
    display: grid;
    gap: 20px; /* Улучшенное расстояние между блоками */
    padding: 20px; /* Увеличенные отступы */
    overflow: visible;
    min-width: 0;
    max-width: 100vw;
  }

  /* Стили для разных режимов просмотра */
  .workspace-grid[data-view-mode="grid"] {
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  }

  .workspace-grid[data-view-mode="list"] {
    grid-template-columns: 1fr;
  }

  .workspace-grid[data-view-mode="compact"] {
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  }

  .workspace-grid.sidebar-collapsed {
    margin: 0;
  }

  .workspace-item {
    contain: layout;
    transform: translateZ(0);
    will-change: transform, opacity;
    backface-visibility: hidden;
    isolation: isolate;
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 12px; /* Компактные отступы */
    transition: all 0.2s ease;
    position: relative;
    overflow: visible;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    -webkit-backdrop-filter: blur(8px);
    backdrop-filter: blur(8px);
    z-index: 1;
    cursor: pointer;
    min-width: 0;
    max-width: 100vw;
    min-height: 80px; /* Компактная высота */
  }

  .workspace-item:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    transform: translateY(-1px) scale(1.02);
  }

  .workspace-item.sidebar-collapsed {
    margin: 0;
  }

  .workspace-header {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
  }

  .workspace-title {
    color: var(--text);
    font-size: 1.25rem;
    font-weight: 600;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.015em;
    line-height: 1.2;
  }

  .workspace-subtitle {
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.4;
  }

  /* Workspace button styles - используем unified-button */
  .workspace-button {
    /* Стили перенесены в unified-button */
    display: none;
  }

  /* ========================================
     ЧАТ КОМПОНЕНТЫ
     ======================================== */

  .chat-container {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: var(--card-radius);
    -webkit-backdrop-filter: blur(20px);
    backdrop-filter: blur(20px);
    box-shadow: var(--shadow-lg);
    transition: all 0.3s ease;
    overflow: visible !important;
    position: relative;
    z-index: 1;
    flex-shrink: 0; /* Общая граница блока НЕ сжимается */
    flex-grow: 0; /* Общая граница блока не растет */
  }

  .chat-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(0,0,0,0.12), rgba(0,0,0,0.06));
    border-radius: var(--card-radius);
    pointer-events: none;
    z-index: -1;
  }

  .chat-container:hover {
    box-shadow: var(--shadow-xl);
  }

  .chat-panel {
    /* ПРАВАЯ ГРАНИЦА ВСЕГДА У ПРАВОГО КРАЯ ЭКРАНА - ПРИОРИТЕТ НАД РАЗМЕРОМ ИЗ НАСТРОЕК */
    width: min(var(--chat-width, 400px), calc(100vw - var(--sidebar-width, 280px)));
    min-width: 250px; /* Минимальная ширина для читаемости */
    max-width: calc(100vw - var(--sidebar-width, 280px));
    height: 100vh;
    min-height: 500px; /* Минимальная высота для видимости поля ввода */
    display: flex;
    flex-direction: column;
    background: transparent;
    box-sizing: border-box;
    overflow-x: hidden;
    position: fixed;
    right: 0; /* ПРАВАЯ ГРАНИЦА ЗАФИКСИРОВАНА К ПРАВОМУ КРАЮ ЭКРАНА */
    top: 0;
    bottom: 0;
    max-height: 100vh;
    flex-shrink: 0; /* Панель чата НЕ сжимается */
    flex-grow: 0; /* Панель чата не растет */
    /* Левая граница автоматически подстраивается при уменьшении ширины */
    left: auto;
  }

  /* Адаптивная ширина чата в зависимости от состояния сайдбара - ПРАВАЯ ГРАНИЦА ПРИОРИТЕТ */
  .sidebar-main-container:not(.collapsed) ~ .main-content .chat-panel {
    max-width: calc(100vw - 280px);
    width: min(var(--chat-width, 400px), calc(100vw - 280px));
    min-width: 250px; /* Минимальная ширина для читаемости */
    right: 0; /* ПРАВАЯ ГРАНИЦА ВСЕГДА У ПРАВОГО КРАЯ */
  }

  .sidebar-main-container.collapsed ~ .main-content .chat-panel {
    max-width: calc(100vw - 80px);
    width: min(var(--chat-width, 400px), calc(100vw - 80px));
    min-width: 250px; /* Минимальная ширина для читаемости */
    right: 0; /* ПРАВАЯ ГРАНИЦА ВСЕГДА У ПРАВОГО КРАЯ */
  }

  /* Адаптивная ширина чата для настроек - ПРАВАЯ ГРАНИЦА ПРИОРИТЕТ */
  .settings-container:not(.hidden) ~ .main-content .chat-panel {
    max-width: calc(100vw - 320px);
    width: min(var(--chat-width, 400px), calc(100vw - 320px));
    min-width: 250px; /* Минимальная ширина для читаемости */
    right: 0; /* ПРАВАЯ ГРАНИЦА ВСЕГДА У ПРАВОГО КРАЯ */
  }

  .settings-container.hidden ~ .main-content .chat-panel {
    max-width: calc(100vw - 300px);
    width: min(var(--chat-width, 400px), calc(100vw - 300px));
    min-width: 250px; /* Минимальная ширина для читаемости */
    right: 0; /* ПРАВАЯ ГРАНИЦА ВСЕГДА У ПРАВОГО КРАЯ */
  }

  /* Дополнительная адаптивность для очень маленьких экранов - ПРАВАЯ ГРАНИЦА ПРИОРИТЕТ */
  @media (max-width: 768px) {
    .chat-panel {
      min-width: 200px; /* Уменьшенная минимальная ширина на мобильных */
      max-width: calc(100vw - 60px) !important; /* ПРИНУДИТЕЛЬНО ОГРАНИЧИВАЕМ ШИРИНУ */
      width: min(var(--chat-width, 400px), calc(100vw - 60px));
      right: 0; /* ПРАВАЯ ГРАНИЦА ВСЕГДА У ПРАВОГО КРАЯ */
      left: auto; /* Левая граница подстраивается автоматически */
    }

    .sidebar-main-container:not(.collapsed) ~ .main-content .chat-panel {
      max-width: calc(100vw - 60px) !important; /* ПРИНУДИТЕЛЬНО ОГРАНИЧИВАЕМ ШИРИНУ */
      width: min(var(--chat-width, 400px), calc(100vw - 60px));
      min-width: 200px;
      right: 0; /* ПРАВАЯ ГРАНИЦА ВСЕГДА У ПРАВОГО КРАЯ */
      left: auto; /* Левая граница подстраивается автоматически */
    }

    .sidebar-main-container.collapsed ~ .main-content .chat-panel {
      max-width: calc(100vw - 60px) !important; /* ПРИНУДИТЕЛЬНО ОГРАНИЧИВАЕМ ШИРИНУ */
      width: min(var(--chat-width, 400px), calc(100vw - 60px));
      min-width: 200px;
      right: 0; /* ПРАВАЯ ГРАНИЦА ВСЕГДА У ПРАВОГО КРАЯ */
      left: auto; /* Левая граница подстраивается автоматически */
    }
  }

  @media (max-width: 480px) {
    .chat-panel {
      min-width: 180px; /* Еще меньше на очень маленьких экранах */
      max-width: calc(100vw - 40px) !important; /* ПРИНУДИТЕЛЬНО ОГРАНИЧИВАЕМ ШИРИНУ */
      width: min(var(--chat-width, 400px), calc(100vw - 40px));
      right: 0; /* ПРАВАЯ ГРАНИЦА ВСЕГДА У ПРАВОГО КРАЯ */
      left: auto; /* Левая граница подстраивается автоматически */
    }

    .sidebar-main-container:not(.collapsed) ~ .main-content .chat-panel,
    .sidebar-main-container.collapsed ~ .main-content .chat-panel {
      max-width: calc(100vw - 40px) !important; /* ПРИНУДИТЕЛЬНО ОГРАНИЧИВАЕМ ШИРИНУ */
      width: min(var(--chat-width, 400px), calc(100vw - 40px));
      min-width: 180px;
      right: 0; /* ПРАВАЯ ГРАНИЦА ВСЕГДА У ПРАВОГО КРАЯ */
      left: auto; /* Левая граница подстраивается автоматически */
    }
  }

  .chat-header {
    background: var(--card-bg);
    border-bottom: 1px solid var(--border);
    border-radius: var(--card-radius) var(--card-radius) 0 0;
    padding: 16px;
  }

  .chat-title {
    color: var(--text);
    font-size: 1.125rem;
    font-weight: 600;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.01em;
    line-height: 1.3;
  }

  .chat-subtitle {
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.4;
  }

  .chat-messages {
    flex: 1;
    min-height: 200px; /* Минимальная высота для области сообщений */
    background: transparent;
    padding: 24px;
    overflow-y: auto;
    box-sizing: border-box;
    position: relative;
    /* Скролл должен идти до поля ввода - НЕ до кнопок */
    margin-bottom: 0; /* Убираем отступ, так как поле ввода абсолютное */
    /* Динамический отступ снизу: учитываем высоту поля ввода и его нижний оффсет */
    padding-bottom: calc(var(--chat-input-height-value, 300px) + 40px);
  }

  /* Область сообщений с учетом скрытых кнопок */
  .chat-messages-with-buttons {
    margin-bottom: 80px; /* Место для кнопок */
  }

  .chat-messages::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.08) 50%, transparent 100%);
    pointer-events: none;
    z-index: 0;
  }

  .chat-messages > * {
    position: relative;
    z-index: 1;
  }

  .message {
    background: var(--card-bg);
    border: none;
    border-radius: 12px;
    padding: 16px 20px; /* Увеличенные отступы для лучшей читаемости */
    margin-bottom: 12px; /* Улучшенное расстояние между сообщениями */
    transition: all 0.2s ease;
    line-height: 1.5; /* Улучшенная читаемость текста */
  }

  .message.user {
    background: linear-gradient(145deg, var(--button-primary), var(--secondary));
    color: var(--background);
    border: none;
  }

  .message.assistant {
    background: var(--card-bg);
    color: var(--text);
    border: none;
  }

  .message.system {
    background: linear-gradient(145deg, var(--button-primary), var(--secondary));
    color: var(--background);
    border: none;
  }

  .chat-input-container {
    background: var(--card-bg);
    border-radius: 0 0 var(--card-radius) var(--card-radius);
    padding: 16px;
    box-sizing: border-box;
    position: sticky;
    bottom: 0;
    z-index: 10;
    flex-shrink: 0; /* Поле ввода НЕ сжимается - остается на месте */
    flex-grow: 0; /* Поле ввода не растет */
    min-height: 120px; /* Минимальная высота для поля ввода */
  }

  /* Убираем влияние кнопок на высоту чата */
  .chat-panel:has(.chat-buttons-panel-expanded) {
    min-height: 400px; /* Фиксированная минимальная высота */
  }

.chat-panel:has(.chat-buttons-panel-expanded) .chat-messages {
  min-height: 200px; /* Фиксированная минимальная высота области сообщений */
  padding-bottom: 135px; /* Уменьшено на 25px, чтобы не поднимать слишком высоко */
}

  /*
   * ОПТИМИЗИРОВАННАЯ ЛОГИКА ПОЗИЦИОНИРОВАНИЯ ЧАТА:
   *
   * 1. НИЖНЯЯ ГРАНИЦА ЧАТА ЗАФИКСИРОВАНА:
   *    - Поле ввода: position: absolute, bottom: 0
   *    - Кнопки режима: position: absolute, bottom: 100% (над полем ввода)
   *    - При изменении высоты НИЗ НЕ ДВИГАЕТСЯ
   *
   * 2. ВЕРХНЯЯ ГРАНИЦА АДАПТИВНА:
   *    - Область сообщений: flex: 1 (сжимается при необходимости)
   *    - Регулировщик: в верхней части поля ввода
   *    - При изменении высоты ВЕРХ ПОДНИМАЕТСЯ
   *
   * 3. ПРАВИЛА ПРИ ИЗМЕНЕНИИ РАЗМЕРОВ:
   *    - Общая граница блока чата НЕ сжимается - остается на месте
   *    - Панель чата НЕ сжимается - остается на месте
   *    - Поле ввода НЕ сжимается - остается на месте
   *    - Кнопки режима НЕ сжимаются - остаются на месте
   *    - Область сообщений СЖИМАЕТСЯ (но с минимальной высотой)
   */

  /* Адаптивные минимальные высоты для мобильных устройств */
  @media (max-width: 768px) {
    .chat-panel {
      min-height: 400px; /* Меньшая минимальная высота на мобильных */
    }

    .chat-panel:has(.chat-buttons-panel-expanded) {
      min-height: 400px; /* Фиксированная минимальная высота на мобильных */
    }

    .chat-messages {
      min-height: 150px; /* Меньшая минимальная высота области сообщений на мобильных */
      padding-bottom: 130px; /* Увеличенный отступ на мобильных с учетом поднятой границы */
    }

  .chat-panel:has(.chat-buttons-panel-expanded) .chat-messages {
      min-height: 150px; /* Фиксированная минимальная высота области сообщений на мобильных */
      padding-bottom: 140px; /* Заканчивается над панелью */
    }

    .chat-input-absolute {
      bottom: 25px; /* Сдвиг вниз на 15px и на мобильных */
      max-height: calc(100vh - 90px); /* Меньшая максимальная высота на мобильных с учетом отступа */
      min-height: 100px; /* Меньшая минимальная высота на мобильных */
    }
  }

  /* Фиксация поля ввода чата */
  .chat-input-fixed {
    position: sticky;
    bottom: 0;
    z-index: 10;
    flex-shrink: 0;
  }

  /* Зафиксированные кнопки чата внизу */
  .chat-buttons-fixed {
    position: absolute;
    bottom: 12px; /* приподнимаем панель функций чуть выше края */
    left: 0;
    right: 0;
    z-index: 20;
    background: var(--card-bg);
    padding: 3px 8px;
  }

  /* Кнопки в нижней панели: убираем рамки, оставляем чистые иконки */
  .chat-buttons-fixed .chat-button-compact {
    border: none !important;
    background: transparent !important;
    box-shadow: none !important;
  }

  .chat-buttons-fixed .chat-button-compact:hover {
    background: rgba(255,255,255,0.06) !important; /* лёгкий hover, без рамок */
  }

  /* Кнопки инструментов внутри поля ввода (слева от отправки) */
  .input-tools .chat-button-compact {
    border: none !important;
    background: transparent !important;
    box-shadow: none !important;
    color: var(--text) !important;
  }

  /* Ховер/выделение как раньше: первичный цвет и лёгкое свечение */
  .input-tools .chat-button-compact:hover {
    background: transparent !important; /* без заливки */
    color: var(--text) !important;
    box-shadow: 0 6px 18px rgba(0,0,0,0.5); /* темнее тень */
    transform: translateY(-1px);
  }

  /* Иконки увеличиваются из центра при наведении */
  .input-tools .chat-button-compact .chat-button-icon,
  .chat-send-button svg {
    transition: transform 120ms ease;
    transform-origin: center center;
  }

  .input-tools .chat-button-compact:hover .chat-button-icon,
  .chat-send-button:hover svg {
    transform: scale(1.12);
  }

  .input-tools .chat-button-compact.active,
  .input-tools .chat-button-compact:active {
    background: transparent !important; /* без заливки в активном состоянии */
    color: var(--text) !important;
    box-shadow: 0 2px 10px rgba(0,0,0,0.3);
  }

  /* Убираем стандартные outline'ы */
  .input-tools .chat-button-compact:focus,
  .input-tools .chat-button-compact:focus-visible {
    outline: none !important;
    box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3) !important; /* зелёный фокус как ранее */
  }

  .input-tools-bottom {
    bottom: 10px;
  }

  /* Кнопка отправки без рамок и с прежним hover-акцентом */
  .chat-send-button,
  .chat-send-button:hover,
  .chat-send-button:active,
  .chat-send-button:focus {
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
  }

  .chat-send-button:hover {
    background: transparent !important; /* без заливки */
    color: var(--text) !important;
    box-shadow: 0 10px 28px rgba(0,0,0,0.55) !important; /* темнее и глубже тень */
    transform: translateY(-1px);
  }

  .chat-send-button:active {
    transform: translateY(0);
  }

  /* ========================================
     КОМПАКТНЫЕ КНОПКИ ЧАТА - СОВРЕМЕННЫЙ ДИЗАЙН
     ======================================== */

  /* Контейнер компактных кнопок */
  .chat-buttons-compact {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    padding: 2px 0;
  }

  /* Сетка компактных кнопок */
  .chat-buttons-compact-grid {
    display: flex;
    align-items: center;
  gap: 6px;
    flex-wrap: wrap;
    justify-content: center;
  }

  /* Компактная кнопка чата */
  .chat-button-compact {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 14px;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    color: var(--text);
    font-size: 0.8rem;
    font-weight: 500;
    transition: all 0.2s ease;
    cursor: pointer;
    min-height: 40px;
    white-space: normal;
    position: relative;
    flex-shrink: 0;
  }

  /* Иконка компактной кнопки */
  .chat-button-icon {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
  }

  /* Текст компактной кнопки */
  .chat-button-label {
    font-size: 0.8rem;
    line-height: 1.2;
    max-width: none;
    white-space: normal;
    overflow: visible;
    text-align: center;
  }

  /* Состояния компактной кнопки */
  .chat-button-compact:hover {
    background: var(--button-primary);
    color: white;
    border-color: var(--button-primary);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px var(--success-hover);
  }

  .chat-button-compact.active {
    background: var(--button-primary);
    color: white;
    border-color: var(--button-primary);
    box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3);
  }

  .chat-button-compact:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3);
  }

  /* Disabled состояние */
  .chat-button-compact.disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }

  .chat-button-compact.disabled:hover {
    background: transparent;
    color: var(--text);
    border-color: var(--border);
    transform: none;
    box-shadow: none;
  }

  /* Активный режим для textarea с зеленым placeholder */
  .chat-textarea.active-mode::placeholder {
    color: rgb(34, 197, 94);
    font-weight: 500;
  }

  /* Адаптивность для мобильных устройств */
  @media (max-width: 768px) {
    .chat-buttons-compact {
      padding: 4px 0;
      gap: 3px;
    }

    .chat-buttons-compact-grid {
      gap: 3px;
    }

    .chat-button-compact {
      padding: 8px 10px;
      min-height: 32px;
      font-size: 0.7rem;
    }

    .chat-button-icon {
      width: 8px;
      height: 8px;
    }

    .chat-button-label {
      font-size: 0.6rem;
      max-width: none;
      white-space: normal;
      overflow: visible;
      text-align: center;
    }
  }

  /* Анимация появления кнопок */
  .chat-button-compact {
    animation: slideInUp 0.3s ease-out;
  }

  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Ультра-компактный режим - только иконки */
  .chat-buttons-compact.ultra-compact .chat-button-compact {
    padding: 8px;
    min-width: 44px;
    min-height: 44px;
    justify-content: center;
  }

  .chat-buttons-compact.ultra-compact .chat-button-label {
    display: none;
  }

  .chat-buttons-compact.ultra-compact .chat-button-icon {
    width: 18px;
    height: 18px;
  }

  /* Компактный режим - короткие названия */
  .chat-buttons-compact.compact .chat-button-compact {
    padding: 8px 12px;
    min-height: 36px;
  }

  .chat-buttons-compact.compact .chat-button-label {
    font-size: 0.7rem;
    max-width: none;
    white-space: normal;
    overflow: visible;
    text-align: center;
  }

  /* Поле ввода с абсолютным позиционированием - ОПТИМИЗИРОВАННОЕ */
  .chat-input-absolute {
    position: absolute;
    bottom: 0px; /* Выше от нижнего края для большего зазора */
    left: 0;
    right: 0;
    z-index: 10;
    height: var(--chat-input-height-value, 300px);
    padding-top: 0; /* Убираем верхний отступ, чтобы полоса сливалась с верхней границей */
    /* Верхняя граница будет двигаться автоматически при изменении высоты */
    /* При увеличении высоты поле растет вверх, НО НИЗ НЕ ДВИГАЕТСЯ */
    max-height: calc(100vh - 110px); /* Максимальная высота с учетом отступа */
    min-height: 120px; /* Минимальная высота поля ввода */
  }

  /* Кнопки режима - фиксированное позиционирование относительно поля ввода */
  .chat-buttons-panel-collapse {
    position: absolute;
    bottom: 100%; /* Располагаются НАД полем ввода */
    left: 0;
    right: 0;
    z-index: 5; /* Ниже поля ввода, но выше сообщений */
    background: var(--card-bg);
    border-radius: var(--card-radius) var(--card-radius) 0 0;
    border-bottom: 1px solid var(--border);
  }

  /* Когда кнопки открыты - уменьшенный отступ для сообщений */
/* Когда кнопки скрыты — пустое место снизу не требуется */
.chat-panel:not(:has(.chat-buttons-panel-expanded)) .chat-messages {
  padding-bottom: 0;
}

  .chat-textarea {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text);
    border-radius: 8px;
    padding: 12px 16px;
    height: 100% !important; /* Фиксируем высоту */
    min-height: unset !important; /* Убираем минимальную высоту */
    resize: none !important; /* Отключаем изменение размера */
    transition: all 0.2s ease;
    width: 100%;
    box-sizing: border-box;
  }

  .chat-textarea:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3); /* Зеленая тень */
    border-color: rgba(34, 197, 94, 0.5); /* Зеленая граница */
  }

  /* Liquid glass панель (используется в чате) */
  .liquid-glass-panel {
    background: var(--panel-bg);
    border: 1px solid var(--panel-border);
    border-radius: 16px;
    box-shadow: var(--shadow-md);
  }

  .liquid-glass-block {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 16px;
    box-shadow: var(--shadow);
  }

  /* Компактные карточки для промптов */
  .liquid-glass-compact {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 16px; /* Увеличиваем закругление */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Серая тень на серый фон */
    transition: all var(--transition);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
  }

  .liquid-glass-compact:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); /* Усиливаем тень при наведении */
    transform: translateY(-1px); /* Только подъем, без увеличения */
    border-color: var(--border-strong);
  }

  .liquid-glass-compact:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  /* Карточки настроек */
  .settings-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px; /* Увеличиваем закругление */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* Серая тень на серый фон */
    transition: all var(--transition);
  }

  .settings-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); /* Усиливаем тень при наведении */
    transform: translateY(-1px); /* Только подъем, без увеличения */
    border-color: var(--border-strong);
  }

  .settings-card:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  /* Карточки промптов - как в левой панели */
  .prompt-card {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: var(--radius); /* Используем переменную платформы */
    padding: 16px; /* Оптимизированные отступы */
    transition: all var(--transition); /* Используем переменную платформы */
    cursor: pointer;
    display: flex;
    flex-direction: column;
    gap: 8px; /* Улучшенное расстояние между элементами */
    width: 100%;
    position: relative;
    -webkit-user-select: none;
    user-select: none;
    min-height: 100px; /* Минимальная высота для лучшего клика */
    box-shadow: var(--shadow-lg); /* Тень всегда видима как при наведении */
  }

  .prompt-card:hover {
    box-shadow: var(--shadow-lg); /* Тень остается той же */
    border-color: var(--border); /* Подсвечиваем границу */
  }

  .prompt-card:active {
    box-shadow: var(--shadow-md);
  }

  .prompt-card.selected {
    background: var(--button-primary);
    color: var(--button-primary-text);
    border-color: var(--border);
    box-shadow: 0 2px 8px var(--success-hover);
  }

  .prompt-card.selected .prompt-title {
    color: var(--button-primary-text) !important;
  }

  .prompt-card.selected .prompt-text {
    color: var(--button-primary-text) !important;
    opacity: 0.9;
  }

  .prompt-card.selected .prompt-tags {
    background: rgba(255, 255, 255, 0.2) !important;
    color: var(--button-primary-text) !important;
  }

  /* Элементы внутри карточек промптов */
  .prompt-title {
    color: var(--text);
    font-weight: 500;
    font-size: 0.875rem;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.4;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    margin: 0;
    padding: 0;
  }

  .prompt-text {
    color: var(--text-secondary);
    font-size: 0.75rem;
    font-family: 'Inter', sans-serif;
    line-height: 1.4;
    margin: 0;
    padding: 0;
  }

  .prompt-tags {
    background: var(--surface);
    color: var(--text-secondary);
    border-radius: 4px;
    padding: 2px 6px;
    font-size: 0.625rem;
    font-weight: 500;
    margin: 0;
  }

  /* Кнопки категорий - как в левой панели */
  .category-button {
    background: var(--card-bg);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 12px 16px;
    transition: all var(--transition);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    width: 100%;
    position: relative;
    -webkit-user-select: none;
    user-select: none;
    min-height: 48px;
    box-shadow: none;
    margin-bottom: 8px;
  }

  .category-button:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-1px);
    border-color: var(--border);
  }

  .category-button:active {
    transform: translateY(0);
    box-shadow: var(--shadow-md);
  }

  .category-button.active {
    background: var(--button-primary);
    color: var(--button-primary-text);
    border-color: var(--border);
    box-shadow: 0 2px 8px var(--success-hover);
  }

  .category-button.active .category-name {
    color: var(--button-primary-text) !important;
  }

  .category-button.active .category-count {
    color: var(--button-primary-text) !important;
    opacity: 0.9;
  }

  .category-name {
    color: var(--text) !important; /* Принудительно используем основной цвет текста */
    font-weight: 500;
    font-size: 0.875rem;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.4;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    margin: 0;
    padding: 0;
  }

  .category-count {
    color: var(--text) !important;
    font-size: 0.75rem;
    font-family: 'Inter', sans-serif;
    line-height: 1.4;
    margin: 0;
    padding: 0;
    background: var(--surface);
    border-radius: 12px;
    padding: 2px 8px;
    font-weight: 500;
  }

  /* Дополнительная специфичность для счетчиков категорий */
  .category-button .category-count,
  .prompts-main-content .category-count,
  .category-count {
    color: var(--text) !important;
  }

  /* Принудительное исправление цвета названий категорий */
  .prompts-main-content .category-name,
  .category-button .category-name,
  .category-name {
    color: var(--text) !important;
    font-weight: 500 !important;
  }

  /* Дополнительная специфичность для исправления серого цвета */
  .prompts-main-content .flex.items-center.justify-between .category-name,
  .prompts-main-content .flex.items-center.justify-between .category-count {
    color: var(--text) !important;
  }

  /* Исправление для темной темы */
  [data-theme="dark"] .category-name,
  [data-theme="dark"] .prompts-main-content .category-name {
    color: var(--text) !important;
  }

  /* Критическое исправление серого цвета категорий */
  .space-y-2 .flex.items-center.justify-between .category-name,
  .space-y-2 .flex.items-center.justify-between .category-count,
  .space-y-2 .flex.items-center.justify-between span {
    color: var(--text) !important;
  }

  /* Исправление для всех состояний кнопок категорий */
  .space-y-2 button .category-name,
  .space-y-2 button .category-count,
  .space-y-2 button span {
    color: var(--text) !important;
  }

  /* АГРЕССИВНОЕ ИСПРАВЛЕНИЕ - переопределяем ВСЕ возможные стили */
  .prompts-main-content .space-y-2 .flex.items-center.justify-between,
  .prompts-main-content .space-y-2 .flex.items-center.justify-between *,
  .prompts-main-content .space-y-2 button,
  .prompts-main-content .space-y-2 button *,
  .prompts-main-content .space-y-2 span,
  .prompts-main-content .space-y-2 .category-name,
  .prompts-main-content .space-y-2 .category-count {
    color: var(--text) !important;
  }

  /* Переопределяем все возможные Tailwind классы */
  .prompts-main-content .text-secondary,
  .prompts-main-content .text-muted,
  .prompts-main-content .text-gray-500,
  .prompts-main-content .text-gray-600,
  .prompts-main-content .text-gray-700 {
    color: var(--text) !important;
  }

  /* КРИТИЧЕСКОЕ ИСПРАВЛЕНИЕ - максимальная специфичность */
  .prompts-main-content .space-y-4 .space-y-2 .flex.items-center.justify-between.p-3.bg-transparent.rounded-lg.border.border-border.hover\\:bg-hover.transition-colors button.flex-1.text-left .flex.items-center.justify-between .category-name,
  .prompts-main-content .space-y-4 .space-y-2 .flex.items-center.justify-between.p-3.bg-transparent.rounded-lg.border.border-border.hover\\:bg-hover.transition-colors button.flex-1.text-left .flex.items-center.justify-between .category-count,
  .prompts-main-content .space-y-4 .space-y-2 .flex.items-center.justify-between.p-3.bg-transparent.rounded-lg.border.border-border.hover\\:bg-hover.transition-colors button.flex-1.text-left .flex.items-center.justify-between span {
    color: var(--text) !important;
  }

  /* Переопределяем все возможные состояния */
  .prompts-main-content .space-y-2 .flex.items-center.justify-between:hover .category-name,
  .prompts-main-content .space-y-2 .flex.items-center.justify-between:hover .category-count,
  .prompts-main-content .space-y-2 .flex.items-center.justify-between:hover span,
  .prompts-main-content .space-y-2 button:hover .category-name,
  .prompts-main-content .space-y-2 button:hover .category-count,
  .prompts-main-content .space-y-2 button:hover span {
    color: var(--text) !important;
  }

  /* ФИНАЛЬНОЕ ИСПРАВЛЕНИЕ - переопределяем ВСЕ */
  .prompts-main-content * .category-name,
  .prompts-main-content * .category-count,
  .prompts-main-content * span[class*="category"] {
    color: var(--text) !important;
  }

  /* Переопределяем все возможные CSS переменные */
  .prompts-main-content .category-name,
  .prompts-main-content .category-count {
    color: var(--text) !important;
    color: #000000 !important; /* Принудительно черный для светлой темы */
  }

  [data-theme="dark"] .prompts-main-content .category-name,
  [data-theme="dark"] .prompts-main-content .category-count {
    color: #ffffff !important; /* Принудительно белый для темной темы */
  }

  /* НОВЫЕ УНИКАЛЬНЫЕ СТИЛИ ДЛЯ КАТЕГОРИЙ - полностью независимые */
  .prompts-category-title {
    color: var(--text) !important;
    font-weight: 600 !important;
    font-size: 0.9rem !important;
    font-family: 'Inter', sans-serif !important;
    letter-spacing: -0.01em !important;
    line-height: 1.3 !important;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    margin: 0 !important;
    padding: 0 !important;
    text-shadow: none !important;
    filter: none !important;
    opacity: 1 !important;
  }

  .prompts-category-counter {
    color: var(--text) !important;
    font-size: 0.8rem !important;
    font-family: 'Inter', sans-serif !important;
    font-weight: 500 !important;
    line-height: 1.2 !important;
    margin: 0 !important;
    padding: 3px 8px !important;
    background: var(--surface) !important;
    border-radius: 10px !important;
    border: 1px solid var(--border) !important;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05) !important;
    text-shadow: none !important;
    filter: none !important;
    opacity: 1 !important;
  }

  /* ДОПОЛНИТЕЛЬНЫЕ СТИЛИ ДЛЯ ПОЛНОГО КОНТРОЛЯ */
  .prompts-main-content .space-y-2 .flex.items-center.justify-between {
    background: transparent !important;
    border: 1px solid var(--border) !important;
    border-radius: 8px !important;
    padding: 12px 16px !important;
    transition: all 0.2s ease !important;
  }

  .prompts-main-content .space-y-2 .flex.items-center.justify-between:hover {
    background: var(--hover) !important;
    border-color: var(--border) !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1) !important;
  }

  /* Стили для кнопок категорий */
  .prompts-main-content .space-y-2 button {
    background: transparent !important;
    border: none !important;
    color: inherit !important;
    cursor: pointer !important;
    width: 100% !important;
    text-align: left !important;
  }

  .prompts-main-content .space-y-2 button:hover {
    background: transparent !important;
    color: inherit !important;
  }

  /* Принудительное переопределение всех возможных конфликтов */
  .prompts-main-content .space-y-2 * {
    color: var(--text) !important;
  }

  .prompts-main-content .space-y-2 .category-name,
  .prompts-main-content .space-y-2 .category-count,
  .prompts-main-content .space-y-2 span {
    color: var(--text) !important;
    font-weight: 600 !important;
  }

  /* Кнопки управления в стиле сайдбара */
  .prompts-management-bar {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 0;
    margin-bottom: 16px;
    border-bottom: 1px solid var(--border);
  }

  .prompts-breadcrumbs {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-right: auto;
  }

  .prompts-breadcrumb-item {
    color: var(--text);
    font-size: 0.75rem;
    opacity: 0.8;
  }

  .prompts-breadcrumb-item.clickable {
    cursor: pointer;
  }

  .prompts-breadcrumb-current {
    color: var(--text);
    font-size: 0.875rem;
    font-weight: 500;
  }

  .prompts-breadcrumb-count {
    color: var(--text);
    font-size: 0.75rem;
    opacity: 0.9;
  }

  /* Кнопки внутри промпта - оригинальный стиль */
  .prompt-action-button {
    background: var(--card-bg);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 8px 12px;
    transition: all var(--transition);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.75rem;
    font-weight: 500;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    min-height: 32px;
    box-shadow: none;
  }

  .prompt-action-button:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-1px);
    border-color: var(--border);
  }

  .prompt-action-button:active {
    transform: translateY(0);
    box-shadow: var(--shadow-md);
  }

  .prompt-action-button.primary {
    background: var(--button-primary);
    color: var(--button-primary-text);
    border-color: var(--border);
  }

  .prompt-action-button.primary:hover {
    background: var(--button-primary-hover);
    box-shadow: 0 2px 8px var(--success-hover);
  }

  .prompt-action-button.danger {
    background: var(--danger);
    color: var(--danger-foreground);
    border-color: var(--danger);
  }

  .prompt-action-button.danger:hover {
    background: var(--danger);
    opacity: 0.9;
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
  }

  /* Кнопка избранного - красивая звездочка */
  .prompt-favorite-button {
    background: var(--surface);
    color: var(--text-secondary);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 10px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    width: 40px;
    height: 40px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    position: relative;
    overflow: hidden;
  }

  .prompt-favorite-button:hover {
    background: var(--hover);
    border-color: var(--border-strong);
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }

  .prompt-favorite-button:active {
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  .prompt-favorite-button.favorited {
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    border-color: #f59e0b;
    color: #92400e;
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
  }

  .prompt-favorite-button.favorited:hover {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    border-color: #d97706;
    color: #78350f;
    transform: translateY(-2px) scale(1.1);
    box-shadow: 0 6px 16px rgba(245, 158, 11, 0.4);
  }

  .prompt-favorite-button.favorited span {
    color: #92400e;
  }

  .prompt-favorite-button.favorited:hover span {
    color: #78350f;
  }

  /* Счетчик избранных промптов */
  .prompt-favorite-button .favorite-count {
    position: absolute;
    top: -4px;
    right: -4px;
    background: #ef4444;
    color: white;
    border-radius: 50%;
    width: 16px;
    height: 16px;
    font-size: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    border: 2px solid var(--surface);
  }

  .prompt-favorite-button.favorited .favorite-count {
    background: #dc2626;
    border-color: #fbbf24;
  }

  /* Значок избранного слева от промпта - унифицированный стиль */
  .prompt-favorite-indicator {
    background: var(--surface);
    color: var(--text-secondary);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 8px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    width: 36px;
    height: 36px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    /* Делаем кнопку зажимаемой */
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    position: relative;
    overflow: hidden;
  }

  .prompt-favorite-indicator:hover {
    background: var(--hover);
    border-color: var(--border-strong);
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }

  .prompt-favorite-indicator:active {
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    /* Эффект зажатия */
    background: var(--hover);
    border-color: var(--border-strong);
  }

  .prompt-favorite-indicator.not-favorited {
    color: var(--text-secondary);
    opacity: 0.7;
  }

  .prompt-favorite-indicator.not-favorited:hover {
    color: #f59e0b;
    opacity: 1;
  }

  /* Стили для избранных промптов - желтая звездочка с прозрачной заливкой */
  .prompt-favorite-indicator:not(.not-favorited) {
    background: linear-gradient(135deg, rgba(251, 191, 36, 0.3), rgba(245, 158, 11, 0.2));
    border-color: #f59e0b;
    color: #f59e0b; /* Желтая звездочка */
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
  }

  .prompt-favorite-indicator:not(.not-favorited):hover {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.4), rgba(217, 119, 6, 0.3));
    border-color: #d97706;
    color: #d97706; /* Более темная желтая звездочка при наведении */
    transform: translateY(-2px) scale(1.1);
    box-shadow: 0 6px 16px rgba(245, 158, 11, 0.4);
  }

  .prompt-favorite-indicator:not(.not-favorited):active {
    background: rgba(245, 158, 11, 0.4); /* Еще более насыщенная заливка при зажатии */
    border-color: #b45309;
    color: #b45309; /* Темная желтая звездочка при зажатии */
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  /* Главный блок промптов с скроллом и тенью */
  .prompts-main-content {
    max-height: calc(100vh - 280px); /* Опускаем блок еще ниже на 60px (400px - 60px = 340px) */
    overflow-y: auto;
    padding-bottom: 20px; /* Добавляем отступ снизу */
    box-shadow: none; /* Убираем тень, которая визуально поднимает низ */
    border-radius: 16px; /* Закругляем все углы блока */
    /* Добавляем внутренний отступ для контента */
    padding: 20px 0 20px 0; /* Отступы сверху и снизу */
    /* Обеспечиваем правильное позиционирование */
    position: relative;
    bottom: 0;
    /* Минимальная ширина для всех кнопок */
    min-width: 400px; /* Увеличиваем минимальную ширину для комфортного отображения */
    width: 100%;
    /* Добавляем фон и границы для видимости */
    background: var(--card-bg);
    border: 1px solid var(--border);
  }

  .prompt-detail-view {
    max-height: calc(100vh - 500px);
    overflow-y: auto;
  }

  .prompts-main-content::-webkit-scrollbar {
    width: 6px;
  }

  .prompts-main-content::-webkit-scrollbar-track {
    background: transparent;
  }

  .prompts-main-content::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 3px;
  }

  .prompts-main-content::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary);
  }

  /* Убираем увеличение при наведении на главный блок и его дочерние элементы */
  .prompts-main-content:hover {
    transform: none;
  }

  /* Предотвращаем layout shift от hover-эффектов внутри блока промптов */
  .prompts-main-content * {
    transition: all var(--transition);
  }

  /* Убираем transform эффекты для элементов внутри главного блока промптов */
  .prompts-main-content .prompt-action-button:hover,
  .prompts-main-content .prompt-favorite-button:hover,
  .prompts-main-content .prompt-favorite-indicator:hover,
  .prompts-main-content .chat-send-button:hover {
    transform: none; /* Убираем translateY(-1px) для предотвращения layout shift */
    box-shadow: var(--shadow-md); /* Оставляем только тень для визуального эффекта */
  }

  /* Специальные стили для звездочек внутри главного блока промптов */
  .prompts-main-content .prompt-favorite-indicator:not(.not-favorited):hover {
    transform: none; /* Убираем transform для предотвращения layout shift */
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3); /* Желтая тень при наведении */
  }

  .prompts-main-content .prompt-favorite-indicator:not(.not-favorited):active {
    transform: none; /* Убираем transform для предотвращения layout shift */
    box-shadow: 0 1px 4px rgba(245, 158, 11, 0.4); /* Желтая тень при зажатии */
  }

  /* Панель настроек GPT */
  .gpt-settings-panel {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 16px;
    margin-top: 16px;
  }

  .gpt-settings-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
  }

  .gpt-settings-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text);
    margin: 0;
  }

  .gpt-settings-clear {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    font-size: 1rem;
    padding: 4px;
    border-radius: 4px;
    transition: all var(--transition);
  }

  .gpt-settings-clear:hover {
    background: var(--hover);
    color: var(--text);
  }

  .gpt-settings-presets {
    margin-bottom: 16px;
  }

  .gpt-settings-label {
    display: block;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--text);
    margin-bottom: 6px;
  }

  .gpt-settings-select {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    background: var(--card-bg);
    color: var(--text);
    font-size: 0.875rem;
    transition: all var(--transition);
  }

  .gpt-settings-select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 2px var(--primary)20;
  }

  .gpt-settings-basic {
    margin-bottom: 16px;
  }

  .gpt-settings-row {
    margin-bottom: 12px;
  }

  .gpt-settings-row:last-child {
    margin-bottom: 0;
  }

  .gpt-settings-label {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--text);
    margin-bottom: 6px;
  }

  .gpt-settings-value {
    font-weight: 600;
    color: var(--text);
  }

  .gpt-settings-slider {
    width: 100%;
    height: 4px;
    border-radius: 2px;
    background: var(--border);
    outline: none;
    -webkit-appearance: none;
    appearance: none;
  }

  .gpt-settings-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--primary);
    cursor: pointer;
    transition: all var(--transition);
  }

  .gpt-settings-slider::-webkit-slider-thumb:hover {
    transform: scale(1.1);
    box-shadow: 0 2px 8px var(--primary)40;
  }

  .gpt-settings-slider::-moz-range-thumb {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--primary);
    cursor: pointer;
    border: none;
    transition: all var(--transition);
  }

  .gpt-settings-toggle {
    background: none;
    border: none;
    color: var(--primary);
    cursor: pointer;
    font-size: 0.75rem;
    font-weight: 500;
    padding: 4px 0;
    transition: all var(--transition);
  }

  .gpt-settings-toggle:hover {
    color: var(--primary-hover);
  }

  .gpt-settings-advanced {
    margin-bottom: 16px;
  }

  .gpt-settings-advanced-content {
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid var(--border);
  }

  .gpt-settings-errors {
    margin-bottom: 12px;
  }

  .gpt-settings-error {
    background: var(--danger)10;
    color: var(--danger);
    font-size: 0.75rem;
    padding: 6px 8px;
    border-radius: 4px;
    margin-bottom: 4px;
  }

  .gpt-settings-error:last-child {
    margin-bottom: 0;
  }

  .gpt-settings-preview {
    background: var(--primary)10;
    border: 1px solid var(--primary)20;
    border-radius: 4px;
    padding: 8px 12px;
    font-size: 0.75rem;
  }

  .gpt-settings-preview-label {
    font-weight: 500;
    color: var(--text);
    margin-right: 8px;
  }

  .gpt-settings-preview-value {
    font-weight: 600;
    color: var(--primary);
  }

  /* Специальные стили для темной темы в настройках промптов */
  [data-theme="dark"] .gpt-settings-panel,
  [data-theme="dark"] .gpt-settings-panel * {
    color: var(--text) !important;
  }

  [data-theme="dark"] .gpt-settings-label,
  [data-theme="dark"] .gpt-settings-preview-label,
  [data-theme="dark"] .prompt-settings-button-settings,
  [data-theme="dark"] .prompt-settings-button-remove {
    color: var(--text) !important;
  }

  /* Принудительное исправление для всех текстовых элементов в настройках */
  .gpt-settings-panel,
  .gpt-settings-panel .gpt-settings-label,
  .gpt-settings-panel .gpt-settings-preview-label,
  .prompt-settings-button-settings,
  .prompt-settings-button-remove {
    color: var(--text) !important;
  }

  /* Улучшенное отображение промпта в markdown стиле */
  .prompt-detail-view {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 20px;
    margin-bottom: 16px;
  }

  .prompt-detail-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border);
  }

  .prompt-detail-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text);
    margin: 0;
  }

  .prompt-detail-actions {
    display: flex;
    gap: 8px;
  }

  .prompt-detail-content {
    display: grid;
    gap: 20px;
  }

  .prompt-detail-section {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .prompt-detail-section-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .prompt-detail-section-content {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 16px;
    min-height: 120px;
    color: var(--text);
  }

  .prompt-detail-section-content.prompt-title {
    min-height: 0;
    padding: 12px 16px;
  }

  .prompt-detail-section-content input,
  .prompt-detail-section-content textarea {
    color: var(--text);
  }

  .prompt-detail-section-content input::placeholder,
  .prompt-detail-section-content textarea::placeholder {
    color: var(--text-secondary);
  }

  .prompt-detail-section-content.prompt-body {
    min-height: 200px;
    max-height: 400px;
    overflow-y: auto;
    font-family: 'Inter', monospace;
    font-size: 0.875rem;
    line-height: 1.6;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .prompt-detail-section-content.prompt-body::-webkit-scrollbar {
    width: 6px;
  }

  .prompt-detail-section-content.prompt-body::-webkit-scrollbar-track {
    background: transparent;
  }

  .prompt-detail-section-content.prompt-body::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 3px;
  }

  .prompt-detail-section-content.prompt-body::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary);
  }

  .prompt-detail-section-content.prompt-tags {
    min-height: 0;
    padding: 12px 16px;
  }

  .prompt-detail-tags-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .prompt-detail-tag-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 12px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    transition: all var(--transition);
  }

  .prompt-detail-tag-item:hover {
    background: var(--hover);
    border-color: var(--border-strong);
  }

  .prompt-detail-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }

  .prompt-detail-tag {
    background: var(--primary)10;
    color: var(--primary);
    font-size: 0.75rem;
    font-weight: 500;
    padding: 4px 8px;
    border-radius: 12px;
    border: 1px solid var(--primary)20;
  }

  .prompt-detail-tag.project-tag {
    background: var(--success)10;
    color: var(--success);
    border-color: var(--success)20;
    cursor: pointer;
    transition: all var(--transition);
  }

  .prompt-detail-tag.project-tag:hover {
    background: var(--success)20;
    transform: translateY(-1px);
  }

  .prompt-detail-tag-remove {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    font-size: 1.2rem;
    font-weight: bold;
    padding: 2px 6px;
    border-radius: 4px;
    transition: all var(--transition);
    line-height: 1;
  }

  .prompt-detail-tag-remove:hover {
    background: var(--danger)10;
    color: var(--danger);
  }

  /* Кнопка настроек промпта в чате */
  .prompt-settings-button {
    display: inline-flex;
    align-items: center;
    background: var(--primary)10;
    border: 1px solid var(--primary)20;
    border-radius: var(--radius);
    padding: 8px 12px;
    margin: 4px;
    transition: all var(--transition);
    max-width: 300px;
  }

  .prompt-settings-button:hover {
    background: var(--primary)20;
    border-color: var(--primary)30;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px var(--primary)20;
  }

  .prompt-settings-button-content {
    display: flex;
    align-items: center;
    gap: 8px;
    background: none;
    border: none;
    cursor: pointer;
    flex: 1;
    text-align: left;
    padding: 0;
  }

  .prompt-settings-button-icon {
    color: var(--primary);
    flex-shrink: 0;
  }

  .prompt-settings-button-text {
    flex: 1;
    min-width: 0;
  }

  .prompt-settings-button-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .prompt-settings-button-settings {
    font-size: 0.75rem;
    color: var(--text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .prompt-settings-button-remove {
    background: none;
    border: none;
    color: var(--text);
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    transition: all var(--transition);
    flex-shrink: 0;
    margin-left: 4px;
  }

  .prompt-settings-button-remove:hover {
    background: var(--danger)10;
    color: var(--danger);
  }

  /* Кнопка "В чат" - серый стиль */
  .chat-send-button {
    background: var(--surface);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 8px 12px;
    transition: all 0.15s ease;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.875rem;
    font-weight: 500;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    min-height: 36px;
    box-shadow: none;
    position: relative;
  }

  .chat-send-button:hover {
    background: var(--hover);
    border-color: var(--border-strong);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  }

  .chat-send-button:active {
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    transition: all 0.05s ease;
  }

  /* Кнопка создания документа с эффектом продавливания */
  .create-document-button {
    background: transparent;
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 8px 12px;
    transition: all 0.15s ease;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.875rem;
    font-weight: 500;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    min-height: 36px;
    box-shadow: none;
    position: relative;
  }

  .create-document-button:hover {
    background: var(--button-primary);
    color: var(--button-primary-text);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  }

  .create-document-button:active {
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    transition: all 0.05s ease;
  }

  /* Кнопка копирования */
  .copy-button {
    background: transparent;
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 8px 12px;
    transition: all 0.15s ease;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.875rem;
    font-weight: 500;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    min-height: 36px;
    box-shadow: none;
    position: relative;
  }

  .copy-button:hover {
    background: var(--button-primary);
    color: var(--button-primary-text);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  }

  .copy-button:active {
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    transition: all 0.05s ease;
  }


  .prompts-view-controls {
    display: flex;
    border-radius: 8px;
    padding: 2px;
    background: var(--surface);
    gap: 2px;
  }

  .prompts-view-button {
    background: transparent;
    border: none;
    border-radius: 6px;
    padding: 6px;
    cursor: pointer;
    transition: all var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
  }

  .prompts-view-button:hover {
    background: var(--hover);
  }

  .prompts-view-button.active {
    background: var(--button-primary);
    color: var(--button-primary-text);
  }

  .prompts-view-button .icon {
    width: 14px;
    height: 14px;
  }

  .prompts-actions {
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .prompts-action-button {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 6px 12px;
    cursor: pointer;
    transition: all var(--transition);
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.875rem;
    color: var(--text);
  }

  .prompts-action-button:hover {
    background: var(--hover);
    border-color: var(--border-strong);
  }

  .prompts-action-button.primary {
    background: var(--button-primary);
    color: var(--button-primary-text);
    border-color: var(--button-primary);
  }

  .prompts-action-button.primary:hover {
    background: var(--button-primary-hover);
  }

  .prompts-action-button.danger {
    background: var(--danger);
    color: var(--danger-foreground);
    border-color: var(--danger);
  }

  .prompts-action-button.danger:hover {
    background: var(--danger-hover);
  }

  .prompts-action-button .icon {
    width: 14px;
    height: 14px;
  }

  /* Утилиты для обрезки текста */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Разделители, используемые в чате */
   .gradient-divider {
     background: linear-gradient(90deg, transparent 0%, var(--border) 20%, var(--border) 80%, transparent 100%);
     height: 1px;
   }

   .gradient-divider-wide {
     background: var(--surface);
     height: 20px;
     opacity: 0.8;
     border-radius: 4px;
   }

    /* Анимация сворачивания панели кнопок */
    .chat-buttons-panel-collapse {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      transform-origin: top;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      flex-shrink: 0; /* Панель кнопок НЕ сжимается - остается на месте */
      flex-grow: 0; /* Панель кнопок не растет */
    }

   .chat-buttons-panel-collapsed {
     max-height: 0;
     opacity: 0;
     transform: translateY(-8px) scaleY(0.8);
     overflow: hidden;
   }

   .chat-buttons-panel-expanded {
     max-height: 400px;
     opacity: 1;
     transform: translateY(0) scaleY(1);
   }

   /* Выравнивание контейнера с отступами */
   .chat-buttons-panel-collapse .px-6 {
     display: flex;
     flex-direction: column;
     align-items: center;
     width: 100%;
     max-width: 100%;
   }

   /* Выравнивание полоски переключения */
   .gradient-divider-wide {
     display: flex;
     justify-content: center;
     align-items: center;
     width: 100%;
     margin: 0 auto;
   }

   /* Простые кнопки в ряд */
   .chat-buttons-phone {
     position: relative;
     width: 100%;
     background: transparent;
     border-radius: 8px;
     padding: 8px;
     margin: 0 auto;
   }

   .chat-buttons-phone-grid {
     display: flex;
     flex-wrap: wrap;
     gap: 8px;
     justify-content: center;
     align-items: center;
     width: 100%;
   }

   /* Кастомный скроллбар */
   .chat-buttons-phone-grid::-webkit-scrollbar {
     width: 4px;
   }

   .chat-buttons-phone-grid::-webkit-scrollbar-track {
     background: rgba(255, 255, 255, 0.1);
     border-radius: 2px;
   }

   .chat-buttons-phone-grid::-webkit-scrollbar-thumb {
     background: rgba(255, 255, 255, 0.3);
     border-radius: 2px;
   }

   .chat-buttons-phone-grid::-webkit-scrollbar-thumb:hover {
     background: rgba(255, 255, 255, 0.5);
   }

   .chat-buttons-phone button {
     display: flex;
     flex-direction: row;
     align-items: center;
     justify-content: center;
     gap: 6px;
     padding: 8px 12px;
     border-radius: 6px;
     background: var(--surface);
     border: 1px solid var(--border);
     transition: all 0.2s ease;
     cursor: pointer;
     min-height: 36px;
     position: relative;
     overflow: hidden;
     white-space: nowrap;
     font-size: 13px;
     font-weight: 500;
     color: var(--text);
   }

   .chat-buttons-phone button:hover {
     background: var(--surface-hover);
     border-color: var(--primary);
     transform: translateY(-1px);
     box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
   }

   .chat-buttons-phone button:active {
     transform: translateY(0);
     background: var(--surface);
   }

   .chat-buttons-phone button .icon {
     width: 16px;
     height: 16px;
     flex-shrink: 0;
     opacity: 0.8;
   }

   .chat-buttons-phone button .label {
     font-size: 13px;
     font-weight: 500;
     color: var(--text);
     white-space: nowrap;
   }

   .chat-buttons-phone button.active {
     background: var(--primary);
     border-color: var(--primary);
     color: var(--button-primary-text);
   }

   .chat-buttons-phone button.active .icon {
     color: var(--button-primary-text);
     opacity: 1;
   }

   .chat-buttons-phone button.active .label {
     color: var(--button-primary-text);
     font-weight: 600;
   }

   /* Группировка по сервисам */
   .chat-buttons-service-group {
     margin-bottom: 12px;
   }

   .chat-buttons-service-group:last-child {
     margin-bottom: 0;
   }

   .chat-buttons-service-header {
     display: flex;
     align-items: center;
     margin-bottom: 8px;
     padding: 4px 8px;
     background: rgba(255, 255, 255, 0.05);
     border-radius: 8px;
     border-left: 3px solid var(--primary);
   }

   .chat-buttons-service-title {
     font-size: 11px;
     font-weight: 600;
     color: var(--text);
     opacity: 0.8;
     text-transform: uppercase;
     letter-spacing: 0.5px;
   }

   /* Скрываем пагинацию для обычных кнопок */
   .chat-buttons-pagination {
     display: none;
   }
   .gradient-divider-light {
     background: linear-gradient(90deg, transparent 0%, var(--border) 30%, var(--border) 70%, transparent 100%);
     height: 1px;
     opacity: 0.6;
   }
   .gradient-divider-vertical {
     background: linear-gradient(180deg, transparent 0%, var(--border) 20%, var(--border) 80%, transparent 100%);
     width: 1px;
   }
   .header-divider-small {
     height: 1px;
     background: linear-gradient(90deg, transparent 0%, var(--border) 20%, var(--border) 80%, transparent 100%);
     opacity: 0.5;
   }

   /* Разделители в свернутой панели - на всю ширину */
   .sidebar-main-container.collapsed .gradient-divider,
   .sidebar-main-container.collapsed .gradient-divider-light {
     background: linear-gradient(90deg, transparent 0%, var(--border) 40%, var(--border) 60%, transparent 100%);
     height: 1px;
     margin: 8px 0;
     width: 100%;
     opacity: 0.8;
   }

  /* Небольшой бейдж сервиса в заголовке группы кнопок */
  .service-badge {
    width: 8px;
    height: 8px;
    border-radius: 9999px;
    background: var(--accent);
  }

  /* Chat button styles - используем unified-button */
  .chat-button {
    /* Стили перенесены в unified-button */
    display: none;
  }

  /* Chat button effects - используем unified-button */
  .chat-button::before {
    /* Эффекты перенесены в unified-button */
    display: none;
  }

  /* Дополнительные утилиты для чата (отсутствовали в общей системе) */
  .chat-interactive {
    pointer-events: auto;
    -webkit-user-select: text;
    user-select: text;
  }

  .chat-messages-no-pointer {
    pointer-events: none;
  }

  /* Улучшенные стили для контейнера кнопок чата */
  .chat-buttons-container {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: var(--card-radius);
    padding: 20px;
    margin: 16px;
    box-shadow: var(--shadow);
    transition: all 0.3s ease;
  }

  .chat-buttons-container:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-1px);
  }

  /* Стили для групп кнопок */
  .chat-button-group {
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding: 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    transition: all 0.2s ease;
  }

  .chat-button-group:hover {
    background: var(--surface);
    border-color: var(--border-strong);
    box-shadow: var(--shadow-sm);
  }

  /* Улучшенные стили для кнопок чата */
  .chat-button {
    position: relative;
    overflow: hidden;
  }

  .chat-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.3s ease;
  }

  .chat-button:hover::before {
    left: 100%;
  }

  /* Цветовые варианты кнопок - используем unified-button с кастомными классами */
  .chat-button-green {
    /* Стили перенесены в unified-button с кастомными классами */
    display: none;
  }

  /* Включаем видимые тонкие скроллбары в области сообщений чата */
  .chat-scrollbar {
    -ms-overflow-style: auto; /* Включаем скроллбар для IE/Edge */
    /* scrollbar-width and scrollbar-color removed for browser compatibility */
  }

  .chat-scrollbar::-webkit-scrollbar {
    width: 8px !important;
    height: 8px !important;
  }

  .chat-scrollbar::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 4px;
  }

  .chat-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3) !important;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: background 0.2s ease;
  }

  .chat-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5) !important;
  }

  .chat-scrollbar::-webkit-scrollbar-thumb:active {
    background: rgba(255, 255, 255, 0.6) !important;
  }

  .chat-scrollbar::-webkit-scrollbar-corner {
    background: transparent;
  }

  /* Стили для кнопки прокрутки вниз */
  .chat-scroll-button {
    background: var(--surface);
    color: var(--text);
    border: 1px solid var(--border);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    visibility: visible; /* Нужна для мягкого скрытия */
    transition: opacity 160ms ease, transform 160ms ease, visibility 0s; /* visibility без задержки при показе */
    position: absolute; /* Позиционируется относительно контейнера */
    z-index: 9999;
    pointer-events: auto;
  }

  /* Точное позиционирование кнопки в блоке ввода: справа и выше на ~30px */
  .chat-scroll-button-input {
    right: 16px; /* соответствует right-4 */
    top: -35px; /* на 35px выше верхней границы input-контейнера */
  }

  .chat-scroll-button:hover {
    background: var(--surface-hover, var(--surface));
    border-color: var(--border-strong, var(--border));
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transform: translateY(0) scale(1.06);
  }

  .chat-scroll-button:active {
    transform: translateY(0) scale(0.96);
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
  }

  /* Плавное исчезновение: сначала прозрачность, потом скрываем visibility с задержкой */
  .chat-scroll-button.is-hidden {
    opacity: 0;
    transform: translateY(2px) scale(0.98);
    transition: opacity 160ms ease, transform 160ms ease, visibility 0s 160ms; /* скрыть после окончания fade */
    visibility: hidden;
  }

  /* Убеждаемся что кнопка всегда нажимаема */
  .chat-scroll-button[style*="pointer-events: auto"] {
    pointer-events: auto !important;
  }

  /* Boss Ai логотип стили */
  .boss-os-text {
    font-size: 0.3em;
    color: var(--text);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  .boss-s-text {
    font-size: 0.3em;
    color: var(--text);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  .boss-ai-text {
    font-size: 0.25em;
    color: var(--text);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  /* Темная тема для Boss Ai */
  [data-theme="dark"] .boss-os-text,
  [data-theme="dark"] .boss-s-text,
  [data-theme="dark"] .boss-ai-text {
    color: var(--text);
    text-shadow: 0 1px 3px rgba(255, 255, 255, 0.1);
  }

  /* Сообщения: простые стили без ярких эффектов */
  .message-user {
    background: var(--surface);
    color: var(--text);
    border: none;
    box-shadow: none;
  }

  .message-assistant {
    background: var(--surface);
    color: var(--text);
    border: none;
    box-shadow: none;
  }

  .message-system {
    background: var(--surface);
    color: var(--text);
    border: none;
    box-shadow: none;
  }

  /* Индикатор печати (три точки) */
  .typing-indicator {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 16px;
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    position: relative;
    overflow: hidden;
  }

  .typing-indicator::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
    pointer-events: none;
  }

  .typing-dot {
    background: var(--text-secondary);
    border-radius: 9999px;
    animation: typing-bounce 1.4s infinite ease-in-out;
  }

  .typing-dot:nth-child(1) {
    animation-delay: -0.32s;
  }

  .typing-dot:nth-child(2) {
    animation-delay: -0.16s;
  }

  .typing-dot:nth-child(3) {
    animation-delay: 0s;
  }

  @keyframes typing-bounce {
    0%, 80%, 100% {
      transform: scale(0.8);
      opacity: 0.5;
    }
    40% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Анимации для чата */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-in-right {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slide-in-left {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }

  .animate-slide-in-right {
    animation: slide-in-right 0.3s ease-out;
  }

  .animate-slide-in-left {
    animation: slide-in-left 0.3s ease-out;
  }

  /* Простые стили для сообщений без анимаций */
  .message-user,
  .message-assistant,
  .message-system {
    animation: none;
  }

  /* ========================================
     ВИДЖЕТ КОМПОНЕНТЫ
     ======================================== */

  .widget-container {
    position: fixed;
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    -webkit-backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
    box-shadow: 0 8px 32px rgba(0,0,0,0.15);
    transition: all 0.2s ease;
    overflow: visible !important;
    z-index: 1000;
    min-width: 280px;
    max-width: 400px;
    cursor: move;
  }

  .widget-container:hover {
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    transform: translateY(-2px);
  }

  .widget-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    border-bottom: 1px solid var(--border);
  }

  .widget-title {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text);
    font-weight: 500;
  }

  .widget-icon {
    color: #ffffff;
    width: 16px;
    height: 16px;
  }

  .widget-controls {
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .widget-control-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    border-radius: 4px;
    background: transparent;
    color: var(--text-secondary);
    transition: all 0.2s ease;
    cursor: pointer;
    border: none;
  }

  .widget-control-btn:hover {
    background: var(--card-bg);
    color: var(--text);
  }

  .widget-control-close:hover {
    background: var(--destructive/20);
    color: var(--destructive);
  }

  .widget-content {
    padding: 16px;
    min-height: 60px;
    height: calc(100% - 48px); /* Занимаем всю высоту минус высота шапки */
    display: flex;
    flex-direction: column;
  }

  /* Стили для активных виджетов */
  .widget-container.active {
    box-shadow: 0 2px 8px var(--success-hover);
    border-color: var(--success-hover);
  }

  .widget-container.active:hover {
    box-shadow: 0 4px 12px var(--success-hover);
    transform: translateY(-2px);
  }

  /* Стили для виджетов без тени */
  .widget-container.no-shadow {
    box-shadow: none !important;
    border-color: var(--border) !important;
  }

  .widget-container.no-shadow:hover {
    box-shadow: none !important;
    transform: none !important;
  }

  /* Исправление выделения текста в темной теме */
  [data-theme="dark"] ::selection {
    background-color: var(--success-hover);
    color: #ffffff;
  }

  [data-theme="dark"] ::-moz-selection {
    background-color: var(--success-hover);
    color: #ffffff;
  }

  /* Убираем черное выделение в темной теме */
  [data-theme="dark"] *::selection {
    background-color: var(--success-hover) !important;
    color: #ffffff !important;
  }

  [data-theme="dark"] *::-moz-selection {
    background-color: var(--success-hover) !important;
    color: #ffffff !important;
  }

  .widget-minimized {
    position: fixed;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 8px 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    transition: all 0.2s ease;
    z-index: 1000;
  }

  .widget-minimized:hover {
    box-shadow: 0 8px 24px rgba(0,0,0,0.2);
    transform: translateY(-1px);
  }

  .widget-minimized-content {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .widget-minimized-icon {
    color: #ffffff;
    flex-shrink: 0;
    width: 16px;
    height: 16px;
  }

  /* Стили для всех иконок в виджетах - белые в темной теме */
  .widget-container .widget-icon,
  .widget-container .widget-minimized-icon,
  .widget-container .date-icon,
  .widget-container svg {
    color: #ffffff !important;
  }

  /* Стили для иконок в свернутых виджетах */
  .widget-minimized .widget-minimized-icon,
  .widget-minimized svg {
    color: #ffffff !important;
  }

  .widget-minimized-text {
    font-size: 11px;
    font-weight: 500;
    color: var(--text);
  }

  /* ========================================
     FLOATING WIDGET WRAPPER
     ======================================== */

  .widget-wrapper {
    position: fixed;
    z-index: 1000;
    pointer-events: auto;
  }


  .widget-wrapper.dragging {
    z-index: 2000;
    transform: rotate(2deg);
    box-shadow: 0 12px 40px rgba(0,0,0,0.25);
  }

  /* ========================================
     УЛУЧШЕННЫЕ СТИЛИ ВИДЖЕТОВ
     ======================================== */

  /* Время в шапке виджета голосового ввода */
  .widget-recording-time {
    margin-left: auto;
    margin-right: 12px;
    font-size: 12px;
    font-weight: 600;
    color: var(--primary);
    background: var(--primary/10);
    padding: 2px 8px;
    border-radius: 12px;
    min-width: 40px;
    text-align: center;
  }

  /* Маленькая кнопка микрофона */
  .voice-start-btn-small {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 20px;
    background: var(--button-primary);
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 2px 8px var(--primary/30);
    width: 100%;
    height: 100%;
    min-height: 80px; /* Минимальная высота для удобства */
  }

  .voice-start-btn-small:hover {
    background: var(--primary-hover);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px var(--primary/40);
  }

  .voice-start-btn-small:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px var(--primary/30);
  }

  /* Кнопка микрофона в minimized состоянии */
  .widget-minimized-mic-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    background: var(--button-primary);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .widget-minimized-mic-btn:hover {
    background: var(--primary-hover);
    transform: scale(1.1);
  }

  .widget-minimized-mic-btn.recording {
    background: var(--destructive);
    animation: pulse 1s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }

  /* Состояние записи */
  .voice-recording-state {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .voice-recording-info {
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100%;
    width: 100%;
  }

  .voice-recording-time {
    font-size: 24px;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 4px;
  }

  .voice-recording-status {
    font-size: 12px;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .voice-recording-controls {
    display: flex;
    gap: 12px;
    justify-content: center;
  }

  .voice-control-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 14px;
  }

  .voice-pause-btn {
    background: var(--warning/20);
    color: var(--warning);
  }

  .voice-pause-btn:hover {
    background: var(--warning/30);
    transform: translateY(-1px);
  }

  .voice-send-btn {
    background: var(--success/20);
    color: var(--success);
  }

  .voice-send-btn:hover:not(:disabled) {
    background: var(--success/30);
    transform: translateY(-1px);
  }

  .voice-send-btn:disabled {
    background: var(--muted);
    color: var(--muted-foreground);
    cursor: not-allowed;
    opacity: 0.5;
  }

  /* Улучшенные стили для времени */
  .time-main {
    font-size: 32px;
    font-weight: 700;
    color: var(--text);
    text-align: center;
    margin-bottom: 8px;
    font-variant-numeric: tabular-nums;
  }

  .date-display {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    color: var(--text-secondary);
    font-size: 14px;
    font-weight: 500;
  }

  .date-icon {
    color: var(--primary);
  }

  /* Основные контролы голосового ввода */
  .voice-main-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    height: calc(100% - 32px); /* Занимаем всю высоту минус отступы */
    margin-bottom: 0;
  }

  /* Время в minimized состоянии */
  .widget-minimized-time {
    font-size: 12px;
    font-weight: 600;
    color: var(--primary);
    margin-left: 8px;
  }

  /* ========================================
     НАСТРОЙКИ КОМПОНЕНТЫ
     ======================================== */

  .settings-panel {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 20px;
    /* Добавляем контейнер с круглыми углами и тенями */
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    transition: all 0.2s ease;
    overflow: visible !important;
    position: relative;
    z-index: 2;
    animation-delay: 0.3s;
    contain: layout style paint;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    margin: 0;
    padding: 0;
    overflow: visible;
    min-width: 300px;
    max-width: 500px;
    width: auto;
    flex: 0 0 auto;
  }


  .setting-item-container {
    -webkit-backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
    border-radius: 12px;
    padding: 16px;
    transition: all 0.2s ease;
    background: var(--card-bg);
    border: 1px solid var(--border);
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
    overflow: visible !important;
    position: relative;
    z-index: 1;
  }

  .setting-item-container:hover {
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
  }

  .setting-input-base {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text);
    --focus-ring: var(--focus-ring);
    --placeholder-color: var(--input-placeholder);
    border-radius: 8px;
    padding: 12px 16px;
    transition: all 0.2s ease;
    width: 100%;
  }

  .setting-input-base:focus {
    outline: none;
    box-shadow: 0 0 0 2px var(--focus-ring);
    border-color: var(--border);
  }

  .setting-select-button {
    background: var(--surface);
    border: none;
    color: var(--text);
    --focus-ring: var(--focus-ring);
    min-width: 120px;
    border-radius: 8px;
    padding: 12px 16px;
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .setting-select-button:focus {
    outline: none;
    box-shadow: 0 0 0 2px var(--focus-ring);
  }

  .setting-select-dropdown {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text);
    max-height: 200px;
    overflow-y: auto;
    z-index: 99999999 !important;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3), 0 0 0 1px var(--border);
    border-radius: 8px;
    min-width: 120px;
    isolation: isolate;
  }

  .setting-select-option {
    color: var(--text);
    border-bottom: 1px solid var(--border);
    cursor: pointer;
    padding: 12px 16px;
    transition: all 0.2s ease;
  }

  .setting-select-option:hover {
    background: var(--surface-hover);
  }

  .setting-select-option[aria-selected="true"] {
    background: var(--button-primary);
    color: var(--background);
  }

  .setting-color-picker-button {
    background: var(--surface);
    border: none;
    color: var(--text);
    --focus-ring: var(--focus-ring);
    border-radius: 8px;
    padding: 12px 16px;
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .setting-color-picker-button:focus {
    outline: none;
    box-shadow: 0 0 0 2px var(--focus-ring);
  }

  .setting-color-picker-popup {
    background: var(--surface);
    border: 1px solid var(--border);
    min-width: 280px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2), 0 0 0 1px var(--border);
    border-radius: 12px;
    padding: 16px;
  }

  .setting-color-preset {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 6px;
    width: 32px;
    height: 32px;
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .setting-color-preset:hover {
    transform: scale(1.1);
  }

  .setting-color-preset.selected {
    border-color: var(--border);
    box-shadow: 0 0 0 2px var(--primary);
  }

  .setting-checkbox {
    background: var(--surface);
    border: 1px solid var(--border);
    transition: all 0.2s ease;
    border-radius: 4px;
    width: 20px;
    height: 20px;
    cursor: pointer;
  }

  .setting-checkbox.checked {
    background: var(--button-primary);
    border-color: var(--border);
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
  }

  .setting-slider-base {
    border-color: var(--border);
    background: var(--surface);
    --focus-border: rgba(34, 197, 94, 0.5); /* Зеленая граница */
    --focus-ring: rgba(34, 197, 94, 0.3); /* Зеленая тень */
    border-radius: 8px;
    height: 8px;
    background: linear-gradient(90deg, var(--border) 0%, var(--primary) 50%, var(--border) 100%);
    border: none;
    outline: none;
    -webkit-appearance: none;
    appearance: none;
  }

  .setting-slider-base::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--primary);
    border: 2px solid var(--background);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .setting-slider-base::-webkit-slider-thumb:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  .setting-slider-base::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--primary);
    border: 2px solid var(--background);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .setting-slider-base::-moz-range-thumb:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  .setting-slider-value {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    border-radius: 6px;
    padding: 4px 8px;
    font-family: 'Inter', sans-serif;
    font-size: 0.75rem;
    font-weight: 500;
    letter-spacing: -0.005em;
  }

  .setting-label {
    color: var(--text);
    font-weight: 500;
    font-family: 'Inter', sans-serif;
    font-size: 0.875rem;
    letter-spacing: -0.005em;
    line-height: 1.4;
  }

  /* ========================================
     КОМПАКТНЫЕ НАСТРОЙКИ
     ======================================== */

  /* Компактные группы настроек */
  .compact-settings-group {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: var(--spacing-4);
    margin-bottom: var(--spacing-4);
  }

  .compact-settings-group h3 {
    color: var(--text);
    font-size: 14px;
    font-weight: 600;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.3;
    margin-bottom: 8px;
  }

  .compact-settings-group p {
    color: var(--text-secondary);
    font-size: 12px;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.4;
    margin-bottom: 12px;
  }

  /* Компактные элементы настроек */
  .compact-setting-item {
    padding: var(--spacing-2);
    margin-bottom: var(--spacing-2);
  }

  .compact-setting-item .setting-item-container {
    padding: var(--spacing-3);
    border-radius: var(--radius-sm);
    background: var(--surface);
    border: 1px solid var(--border);
    transition: all var(--transition);
  }

  .compact-setting-item .setting-item-container:hover {
    background: var(--surface-hover);
    border-color: var(--border);
  }

  /* Сетка для булевых настроек */
  .boolean-settings-grid {
    display: grid;
    gap: var(--spacing-2);
  }

  .boolean-settings-grid.grid-cols-2 {
    grid-template-columns: repeat(2, 1fr);
  }

  .boolean-settings-grid.grid-cols-3 {
    grid-template-columns: repeat(3, 1fr);
  }

  @media (max-width: 768px) {
    .boolean-settings-grid.grid-cols-2,
    .boolean-settings-grid.grid-cols-3 {
      grid-template-columns: 1fr;
    }
  }

  /* Дополнительные настройки */
  .advanced-settings-toggle {
    border-top: 1px solid var(--border);
    padding-top: var(--spacing-4);
  }

  .advanced-settings-toggle button {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-2);
    background: transparent;
    border: none;
    border-radius: var(--radius);
    color: var(--text);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition);
  }

  .advanced-settings-toggle button:hover {
    background: var(--surface-hover);
  }

  .advanced-settings-content {
    margin-top: var(--spacing-4);
    animation: slideDown 0.2s ease-out;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Адаптивные отступы для компактного режима */
  .settings-content.compact {
    --spacing-category: var(--spacing-6);
    --spacing-group: var(--spacing-4);
    --spacing-item: var(--spacing-2);
  }

  .settings-content.compact .space-y-8 > * + * {
    margin-top: var(--spacing-category);
  }

  .settings-content.compact .space-y-6 > * + * {
    margin-top: var(--spacing-group);
  }

  .settings-content.compact .space-y-3 > * + * {
    margin-top: var(--spacing-item);
  }

  /* ========================================
     СТИЛИ ДЛЯ РЕГУЛИРОВЩИКОВ РАЗМЕРОВ
     ======================================== */

  /* Регулировщик ширины чата (слева от чата) */
  .chat-resize-handle {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 4px;
    background: transparent;
    cursor: col-resize;
    z-index: 10;
    transition: all 0.2s ease;
  }

  /* Убираем видимость регулировщика при наведении */
  .chat-resize-handle:hover {
    background: transparent;
    opacity: 1;
  }

  .chat-resize-handle:active {
    background: transparent;
    opacity: 1;
  }

  /* Регулировщик высоты поля ввода чата - ВИДИМАЯ ПОЛОСКА, СКРЫТЫЙ ФУНКЦИОНАЛ */
  .chat-resize-handle {
    position: absolute;
    top: 0; /* Располагается в ВЕРХНЕЙ части поля ввода */
    left: -16px; /* выходим в область внутреннего отступа контейнера */
    right: -16px; /* соединяем с краями панели чата */
    height: 2px; /* Тонкая видимая полоска */
    background: linear-gradient(90deg,
      transparent 0%,
      rgba(34, 197, 94, 0.3) 20%,
      rgba(34, 197, 94, 0.6) 50%,
      rgba(34, 197, 94, 0.3) 80%,
      transparent 100%
    );
    cursor: default; /* Обычный курсор, не показываем что это регулировщик */
    z-index: 30; /* Ниже функционального элемента */
    transition: all 0.3s ease;
    opacity: 0.8;
    border-radius: 0;
    margin: 0; /* Соединяем полосу с границами контейнера без отступов */
    pointer-events: none; /* Не реагирует на клики */
  }

  /* Показываем зеленую полоску когда кнопки раскрыты */
  .chat-panel:has(.chat-buttons-panel-expanded) .chat-resize-handle {
    opacity: 0.8;
    height: 2px;
  }

  /* Полоска остается статичной при наведении */
  .chat-resize-handle:hover {
    background: linear-gradient(90deg,
      transparent 0%,
      rgba(34, 197, 94, 0.3) 20%,
      rgba(34, 197, 94, 0.6) 50%,
      rgba(34, 197, 94, 0.3) 80%,
      transparent 100%
    );
    opacity: 0.8;
    transform: none;
  }

  .chat-resize-handle:active {
    background: linear-gradient(90deg,
      transparent 0%,
      rgba(34, 197, 94, 0.3) 20%,
      rgba(34, 197, 94, 0.6) 50%,
      rgba(34, 197, 94, 0.3) 80%,
      transparent 100%
    );
    opacity: 0.8;
    transform: none;
  }

  /* Невидимый функциональный элемент для регулировки */
  .chat-resize-handle::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 8px;
    background: transparent;
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><rect x="8" y="2" width="4" height="16" fill="%2322c55e" rx="2"/><rect x="6" y="4" width="8" height="2" fill="%2322c55e" rx="1"/><rect x="6" y="14" width="8" height="2" fill="%2322c55e" rx="1"/></svg>') 10 10, ns-resize;
    z-index: 60;
    pointer-events: auto;
  }

  /* Функциональный элемент работает в обоих режимах */
  .chat-panel:has(.chat-buttons-panel-expanded) .chat-resize-handle::before {
    display: block;
    height: 8px;
    background: transparent;
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><rect x="8" y="2" width="4" height="16" fill="%2322c55e" rx="2"/><rect x="6" y="4" width="8" height="2" fill="%2322c55e" rx="1"/><rect x="6" y="14" width="8" height="2" fill="%2322c55e" rx="1"/></svg>') 10 10, ns-resize;
    pointer-events: auto;
  }

  /* Скрываем серую полоску-разделитель когда кнопки раскрыты */
  .chat-panel:has(.chat-buttons-panel-expanded) .gradient-divider-wide {
    display: none;
  }

  /* Убираем пустое место в свернутом режиме кнопок */
/* дубль закрепляем ближе к низу файла для переопределения */
.chat-panel:not(:has(.chat-buttons-panel-expanded)) .chat-messages {
    padding-bottom: 0;
  }

  /* Верхняя полоска с градиентом в прозрачность для скрытого режима */
  .chat-panel:not(:has(.chat-buttons-panel-expanded)) .chat-messages::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 20px;
    background: linear-gradient(to bottom,
      rgba(0, 0, 0, 0.8) 0%,
      rgba(0, 0, 0, 0.4) 50%,
      transparent 100%
    );
    z-index: 10;
    pointer-events: none;
  }

  /* Стрелка вниз теперь в React компоненте, CSS убран */

  /* Убираем пустое место на мобильных в свернутом режиме */
  @media (max-width: 768px) {
    .chat-panel:not(:has(.chat-buttons-panel-expanded)) .chat-messages {
      padding-bottom: 60px; /* Минимальный отступ в свернутом режиме на мобильных */
    }
  }

  /* Регулировщик ширины сайдбара */
  .sidebar-resize-handle {
    width: 4px;
    background: var(--border);
    cursor: col-resize;
    transition: all 0.2s ease;
    flex-shrink: 0;
  }

  /* Убираем видимость регулировщика при наведении */
  .sidebar-resize-handle:hover {
    background: transparent;
    opacity: 1;
  }

  .sidebar-resize-handle:active {
    background: transparent;
    opacity: 1;
  }

  /* Регулировщик высоты рабочего пространства */
  .workspace-resize-handle {
    height: 4px;
    background: var(--border);
    cursor: row-resize;
    transition: all 0.2s ease;
  }

  /* ========================================
     FIX: Правый край содержимого панелей
     Обеспечиваем, чтобы контент не выходил за правую границу контейнеров
     ======================================== */
  .sidebar-container .sidebar-main-container {
    box-sizing: border-box;
    max-width: 100%;
    padding-right: var(--spacing-2);
    overflow-x: hidden;
  }

  .chat-container .chat-panel {
    box-sizing: border-box;
    max-width: 100%;
    padding-right: var(--spacing-2);
    overflow-x: hidden;
  }

  .chat-container .chat-header,
  .chat-container .chat-messages,
  .chat-container .chat-input-container {
    box-sizing: border-box;
    max-width: 100%;
    padding-right: var(--spacing-2);
  }

  /* Убираем видимость регулировщика при наведении */
  .workspace-resize-handle:hover {
    background: transparent;
    opacity: 1;
  }

  .workspace-resize-handle:active {
    background: transparent;
    opacity: 1;
  }

  /* Визуальные индикаторы для регулировщиков */
  .resize-handle-indicator {
    position: absolute;
    background: var(--button-primary);
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
  }

  .resize-handle-indicator.vertical {
    width: 2px;
    height: 100%;
    left: 50%;
    transform: translateX(-50%);
  }

  .resize-handle-indicator.horizontal {
    height: 2px;
    width: 100%;
    top: 50%;
    transform: translateY(-50%);
  }

  /* Убираем видимость индикаторов регулировщиков при наведении */
  .chat-resize-handle:hover .resize-handle-indicator,
  .sidebar-resize-handle:hover .resize-handle-indicator,
  .workspace-resize-handle:hover .resize-handle-indicator {
    opacity: 0;
  }

  /* ========================================
     УЛУЧШЕННЫЕ НАСТРОЙКИ - ПОИСК И UX
     ======================================== */

  /* Панель поиска */
  .settings-search-panel {
    background: var(--background);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    z-index: 10;
  }

  .settings-search-input {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: var(--spacing-2) var(--spacing-3);
    color: var(--text);
    transition: all var(--transition);
  }

  .settings-search-input:focus {
    outline: none;
    border-color: var(--border);
    box-shadow: 0 0 0 2px var(--primary)/20;
  }

  .settings-search-input::placeholder {
    color: var(--text-secondary);
  }

  /* Кнопки действий */
  .settings-action-button {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-2) var(--spacing-3);
    background: var(--surface);
    border: none;
    border-radius: var(--radius);
    color: var(--text);
    font-size: 14px;
    cursor: pointer;
    transition: all var(--transition);
  }

  .settings-action-button:hover {
    background: var(--surface-hover);
    border-color: var(--border);
    box-shadow: 0 2px 8px var(--success-hover);
  }

  .settings-action-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Индикатор загрузки */
  .settings-loading-indicator {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    color: var(--text-secondary);
    font-size: 14px;
  }

  .settings-loading-spinner {
    width: 16px;
    height: 16px;
    border: 2px solid var(--primary);
    border-top: 2px solid transparent;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* Фильтрация результатов поиска */
  .settings-item-hidden {
    display: none !important;
  }

  .settings-item-highlighted {
    background: var(--button-primary)/10;
    border-color: var(--border);
    box-shadow: 0 0 0 1px var(--primary)/20;
  }

  /* Улучшенные уведомления */
  .settings-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 50;
    display: flex;
    align-items: center;
    gap: var(--spacing-3);
    padding: var(--spacing-3) var(--spacing-4);
    background: var(--success);
    color: var(--success-foreground);
    border-radius: var(--radius);
    box-shadow: var(--shadow-lg);
    animation: slideInRight 0.3s ease-out;
  }

  @keyframes slideInRight {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  /* Предварительный просмотр */
  .settings-preview-mode {
    position: relative;
  }

  .settings-preview-mode::before {
    content: 'ПРЕДВАРИТЕЛЬНЫЙ ПРОСМОТР';
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--warning);
    color: var(--warning-foreground);
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    z-index: 10;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }

  /* Адаптивность для мобильных устройств */
  @media (max-width: 768px) {
    .settings-search-panel {
      padding: var(--spacing-3);
    }

    .settings-search-input {
      font-size: 16px; /* Предотвращает зум на iOS */
    }

    .settings-action-button {
      padding: var(--spacing-2);
      font-size: 12px;
    }

    .settings-action-button span {
      display: none; /* Скрываем текст на мобильных */
    }
  }

  .setting-description {
    color: var(--text-secondary);
    font-size: 0.875rem;
  }

  .setting-muted {
    color: var(--text-muted);
  }

  /* Settings component styles */
  .settings-header {
    border-color: var(--border);
    background: var(--surface);
    padding: 16px;
    border-bottom: 1px solid var(--border);
  }

  .settings-header-icon {
    background: var(--button-primary);
    width: 32px;
    height: 32px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .settings-header-icon svg {
    color: var(--background);
    width: 16px;
    height: 16px;
  }

  .settings-title {
    color: var(--text);
    font-size: 1.125rem;
    font-weight: 600;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.01em;
    line-height: 1.3;
    margin-bottom: 8px;
  }

  .settings-description {
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.4;
    margin-bottom: 16px;
  }

  .settings-category-icon {
    background: var(--surface);
    width: 24px;
    height: 24px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .settings-category-icon svg {
    color: var(--text-secondary);
    width: 14px;
    height: 14px;
  }

  .settings-category-title {
    color: var(--text);
    font-size: 1.125rem;
    font-weight: 600;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.01em;
    line-height: 1.3;
    margin-bottom: 8px;
  }

  .settings-category-description {
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-family: 'Inter', sans-serif;
    letter-spacing: -0.005em;
    line-height: 1.4;
    margin-bottom: 16px;
  }

  .settings-actions {
    border-color: var(--border);
    padding: 16px;
    border-top: 1px solid var(--border);
  }

  .settings-save-success {
    background: linear-gradient(to right, var(--button-primary), var(--accent));
    color: white;
    box-shadow: 0 0 20px var(--primary);
    border: 1px solid var(--primary);
    border-radius: 8px;
    padding: 12px 16px;
  }

  /* Color preview styles for theme editor */
  .color-preview {
    width: 24px;
    height: 24px;
    border-radius: 6px;
    border: 1px solid var(--border);
  }

  /* ========================================
     АНИМИРОВАННАЯ ПОЛОСКА СВЕРХУ ЭКРАНА
     ======================================== */

  .animated-top-bar {
    background: linear-gradient(
      90deg,
      #ff0000 0%,           /* Красный */
      #ff8000 16.66%,       /* Оранжевый */
      #ffff00 33.33%,       /* Желтый */
      #00ff00 50%,          /* Зеленый */
      #000000 66.66%,       /* Черный */
      #8000ff 83.33%,       /* Фиолетовый */
      #ff0000 100%          /* Красный (замыкаем круг) */
    );
    background-size: 300% 100%;
    animation: rainbow-flow 8s linear infinite;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  /* Loading: Boss Ai logo and dots */
  .loading-boss-logo {
    font-weight: 900;
    font-size: clamp(42px, 12vw, 140px);
    letter-spacing: 0.04em;
    display: inline-block;
    background: linear-gradient(90deg, var(--button-primary, #15803d), var(--button-primary-hover, #16a34a));
    -webkit-background-clip: text;
    background-clip: text;
    /* Фолбек: сплошной зелёный, если gradient text не поддерживается */
    color: var(--button-primary, #15803d);
    /* Для WebKit-браузеров показываем градиент внутри текста */
    -webkit-text-fill-color: transparent;
    text-shadow:
      0 0 24px color-mix(in srgb, var(--button-primary, #15803d) 55%, transparent),
      0 0 18px color-mix(in srgb, var(--button-primary, #15803d) 35%, transparent);
  }

  .loading-boss-dots {
    width: 64px;
    height: 8px;
    margin: 8px auto 0;
    position: relative;
    filter: drop-shadow(0 0 8px rgba(0,255,136,0.45));
  }

  .loading-boss-dots::before {
    content: '';
    position: absolute; inset: 0;
    background:
      radial-gradient(circle at 8px 50%, rgba(160,255,210,0.9) 0 3px, transparent 4px),
      radial-gradient(circle at 32px 50%, rgba(160,255,210,0.7) 0 3px, transparent 4px),
      radial-gradient(circle at 56px 50%, rgba(160,255,210,0.5) 0 3px, transparent 4px);
    animation: loading-boss-blink 1.2s infinite ease-in-out;
  }

  @keyframes loading-boss-blink { 0%,100% { opacity: .3 } 50% { opacity: 1 } }

  /* Старый класс для совместимости */
  .chat-header-gradient {
    background: linear-gradient(
      90deg,
      #ff0000 0%,           /* Красный */
      #ff8000 16.66%,       /* Оранжевый */
      #ffff00 33.33%,       /* Желтый */
      #00ff00 50%,          /* Зеленый */
      #000000 66.66%,       /* Черный */
      #8000ff 83.33%,       /* Фиолетовый */
      #ff0000 100%          /* Красный (замыкаем круг) */
    );
    background-size: 300% 100%;
    animation: rainbow-flow 8s linear infinite;
    opacity: 0.8;
    mix-blend-mode: overlay;
  }

  @keyframes rainbow-flow {
    0% {
      background-position: 0% 50%;
    }
    100% {
      background-position: 300% 50%;
    }
  }

  /* ========================================
     СИСТЕМА АКЦЕНТНЫХ ЦВЕТОВ ИЗ ПОЛОСКИ
     ======================================== */

  /* CSS переменные для акцентных цветов из радужной полоски */
  :root {
    --accent-red: #ff0000;
    --accent-orange: #ff8000;
    --accent-yellow: #ffff00;
    --accent-green: #00ff00;
    --accent-blue: #000000;
    --accent-purple: #8000ff;

    /* Активные акцентные цвета (будут меняться динамически) */
    --dynamic-accent-primary: var(--accent-red);
    --dynamic-accent-secondary: var(--accent-orange);
    --dynamic-accent-tertiary: var(--accent-yellow);
  }

  /* Компоненты с акцентными цветами */
  .accent-button {
    background: linear-gradient(135deg, var(--dynamic-accent-primary), var(--dynamic-accent-secondary));
    color: white;
    border: none;
    border-radius: 8px;
    padding: 12px 24px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  }

  .accent-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    filter: brightness(1.1);
  }

  .accent-card {
    background: linear-gradient(135deg,
      rgba(255, 255, 255, 0.1),
      rgba(255, 255, 255, 0.05)
    );
    border: 1px solid var(--dynamic-accent-primary);
    border-radius: 12px;
    padding: 20px;
    -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    position: relative;
    overflow: hidden;
  }

  .accent-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg,
      var(--dynamic-accent-primary),
      var(--dynamic-accent-secondary),
      var(--dynamic-accent-tertiary)
    );
  }

  .accent-text {
    background: linear-gradient(135deg,
      var(--dynamic-accent-primary),
      var(--dynamic-accent-secondary)
    );
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    font-weight: 700;
  }

  .accent-border {
    border: 2px solid transparent;
    background: linear-gradient(var(--background), var(--background)) padding-box,
                linear-gradient(135deg, var(--dynamic-accent-primary), var(--dynamic-accent-secondary)) border-box;
    border-radius: 8px;
  }

  /* Индикаторы статуса с акцентными цветами */
  .status-indicator {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 500;
  }

  .status-active {
    background: rgba(0, 255, 0, 0.1);
    color: var(--accent-green);
    border: 1px solid var(--accent-green);
  }

  .status-warning {
    background: rgba(255, 255, 0, 0.1);
    color: var(--accent-yellow);
    border: 1px solid var(--accent-yellow);
  }

  .status-error {
    background: rgba(255, 0, 0, 0.1);
    color: var(--accent-red);
    border: 1px solid var(--accent-red);
  }

  /* Анимированные элементы с акцентными цветами */
  .accent-glow {
    position: relative;
    overflow: hidden;
  }

  .accent-glow::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg,
      transparent,
      rgba(255, 255, 255, 0.2),
      transparent
    );
    animation: shimmer 3s infinite;
  }

  @keyframes shimmer {
    0% { left: -100%; }
    100% { left: 100%; }
  }

  /* CSS классы для динамических цветов */
  .accent-color-primary {
    background-color: var(--dynamic-accent-primary) !important;
  }

  .accent-color-secondary {
    background-color: var(--dynamic-accent-secondary) !important;
  }

  .accent-color-tertiary {
    background-color: var(--dynamic-accent-tertiary) !important;
  }

  /* Альтернативный вариант с более плавной анимацией */
  .chat-header-gradient-smooth {
    background: linear-gradient(
      90deg,
      #ff0000 0%,           /* Красный */
      #ff4000 8.33%,        /* Красно-оранжевый */
      #ff8000 16.66%,       /* Оранжевый */
      #ffbf00 25%,          /* Желто-оранжевый */
      #ffff00 33.33%,       /* Желтый */
      #80ff00 41.66%,       /* Желто-зеленый */
      #00ff00 50%,          /* Зеленый */
      #00ff80 58.33%,       /* Зелено-голубой */
      #000000 83.33%,       /* Черный */
      #8000ff 91.66%,       /* Фиолетовый */
      #ff00ff 100%          /* Пурпурный */
    );
    background-size: 400% 100%;
    animation: rainbow-flow-smooth 12s ease-in-out infinite;
    opacity: 0.7;
    mix-blend-mode: overlay;
  }

  @keyframes rainbow-flow-smooth {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
  }
}

/* ========================================
   СТИЛИ ДЛЯ НИЖНИХ КНОПОК САЙДБАРА
   ======================================== */

.sidebar-footer {
  background: var(--card-bg);
  margin-top: auto;
}

.sidebar-footer-button {
  background: transparent;
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 10px 12px;
  transition: all 0.2s ease;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  min-width: 40px;
  min-height: 40px;
  position: relative;
  overflow: hidden;
}

.sidebar-footer-button:hover {
  background: var(--card-bg);
  color: var(--text);
  box-shadow: 0 2px 8px var(--success-hover);
  transform: translateY(-1px);
}

/* Светлая тема - кнопки футера */
[data-theme="light"] .sidebar-footer-button {
  background: var(--button-primary-inactive);
  color: var(--text);
  border: 1px solid var(--border);
}

[data-theme="light"] .sidebar-footer-button:hover {
  background: var(--button-primary);
  color: #ffffff;
  border-color: var(--button-primary);
  box-shadow: 0 2px 8px var(--success-hover);
}

[data-theme="light"] .sidebar-footer-button:active:not(:disabled) {
  background: var(--button-primary);
  color: #ffffff;
  border-color: var(--button-primary);
}

/* Темная тема - кнопки футера */
[data-theme="dark"] .sidebar-footer-button {
  background: var(--button-primary-inactive);
  color: var(--text);
  border: 1px solid var(--border);
}

[data-theme="dark"] .sidebar-footer-button:hover {
  background: var(--button-primary);
  color: #ffffff;
  border-color: var(--button-primary);
  box-shadow: 0 2px 8px var(--success-hover);
}

/* Активные состояния кнопок футера в темной теме */
[data-theme="dark"] .sidebar-footer-button:active:not(:disabled) {
  background: var(--button-primary);
  color: #ffffff;
  border-color: var(--button-primary);
}

.sidebar-footer-button:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

.sidebar-footer-button:focus {
  outline: none;
  box-shadow: 0 0 0 2px var(--focus-ring);
}

.sidebar-footer-button.active {
  background: var(--button-primary);
  color: var(--button-primary-text);
  box-shadow: 0 2px 8px var(--success-hover);
}

.sidebar-footer-button.active * {
  color: var(--button-primary-text) !important;
}

/* Стили для контейнера кнопок переключения вида workspace */
.workspace-view-container .sidebar-footer-button {
  transition: all 0.2s ease;
}

.workspace-view-container .sidebar-footer-button:hover {
  box-shadow: 0 2px 8px var(--success-hover);
  background: var(--button-primary);
  color: #ffffff;
  border: none !important;
}

.workspace-view-container .sidebar-footer-button.active {
  box-shadow: 0 2px 8px var(--success-hover) !important;
  background: var(--button-primary);
  color: var(--button-primary-text);
  border: none !important;
}

.sidebar-footer-button .icon {
  width: 18px;
  height: 18px;
  transition: all 0.2s ease;
}

.sidebar-footer-button:hover .icon {
  transform: scale(1.1);
}

/* Специальные стили для кнопки разворачивания */
.sidebar-footer-button.expand-button {
  background: var(--surface);
  color: var(--button-secondary-text);
}

.sidebar-footer-button.expand-button:hover {
  background: var(--button-secondary-hover);
  color: var(--button-secondary-text);
}

/* Адаптивные стили для свернутой панели */
.sidebar-footer.collapsed .sidebar-footer-button {
  width: 100%;
  margin-bottom: 4px;
  justify-content: center; /* Центрируем иконки в свернутом состоянии */
  /* Применяем стили для свернутого состояния */
  background: transparent !important;
  color: var(--text) !important;
  border: none !important;
  border-radius: 8px !important;
  padding: 8px !important;
  width: 40px !important;
  height: 40px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  margin: 0 auto 4px auto !important; /* Центрируем кнопки */
  box-shadow: none !important;
}

.sidebar-footer:not(.collapsed) .sidebar-footer-button {
  flex: 1;
  margin: 0 1px;
}

/* Hover эффекты для свернутого футера */
.sidebar-footer.collapsed .sidebar-footer-button:hover {
  background: var(--button-primary) !important; /* Синий фон как в развернутой панели */
  color: #ffffff !important; /* Белый текст как в развернутой панели */
  border-color: var(--button-primary) !important;
  box-shadow: 0 2px 8px var(--success-hover);
  transform: translateY(-1px);
}

.sidebar-footer.collapsed .sidebar-footer-button.active {
  background: var(--button-primary) !important; /* Синий фон как в развернутой панели */
  color: var(--button-primary-text) !important; /* Белый текст как в развернутой панели */
  border-color: var(--border) !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

/* Убираем padding футера в свернутом состоянии */
.sidebar-main-container.collapsed .sidebar-footer,
.sidebar-footer.collapsed {
  padding: 0 !important; /* Убираем весь padding */
  margin-left: -7px;
}

/* Убираем padding для всех div внутри footer в свернутом состоянии */
.sidebar-main-container.collapsed .sidebar-footer div[class*="p-"],
.sidebar-footer.collapsed div[class*="p-"] {
  padding: 0 !important;
}

/* ========================================
   СТИЛИ ДЛЯ СЕРВИСА ПРОМПТОВ
   ======================================== */

/* Минимальная ширина для сервиса промптов */
.platform-service[data-service="prompts"],
.prompts-service-container {
  min-width: 400px; /* Увеличиваем минимальную ширину для комфортного отображения */
  width: 100%;
  border-radius: 16px; /* Закругляем углы контейнера */
  background: var(--card-bg);
  border: 1px solid var(--border);
  overflow: hidden; /* Скрываем содержимое за закругленными углами */
}

/* Обеспечиваем правильное отображение кнопок в промптах */
.prompts-main-content .space-y-2 .flex.items-center.justify-between {
  min-width: 360px; /* Увеличиваем для комфортного отображения длинных названий */
  width: 100%;
}

/* Кнопки управления в промптах */
.prompts-main-content .flex.gap-2 button {
  min-width: 32px;
  white-space: nowrap;
}

/* Кнопка "Создать категорию" */
.prompts-main-content .flex.gap-2 button:has-text("Создать категорию") {
  min-width: 140px;
}

/* ========================================
   СТИЛИ ДЛЯ КОНТЕЙНЕРА НАСТРОЕК
   ======================================== */

.settings-container {
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: transparent;
  /* Убрана общая рамка */
  overflow: hidden;
}

.settings-content-container {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  margin-top: 8px;
}

/* ========================================
   СТИЛИ ДЛЯ КНОПОК УДАЛЕНИЯ В ПРОМПТАХ
   ======================================== */

/* Кнопки удаления в промптах не должны растягиваться */
.platform-button-danger.sidebar-footer-button {
  flex: none !important;
  width: auto !important;
  min-width: 32px !important;
  max-width: 40px !important;
  padding: 8px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* ========================================
   СТИЛИ ДЛЯ СЕРВИСНЫХ КНОПОК САЙДБАРА
   ======================================== */

.sidebar-service-button {
  background: transparent;
  color: var(--text);
  border: none !important;
  border-radius: 12px;
  padding: 10px 14px;
  transition: all 0.2s ease;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  position: relative;
  overflow: hidden;
  font-weight: 500;
  min-height: 48px;
}

.sidebar-service-button:hover {
  background: var(--button-primary);
  color: #ffffff;
  border: none !important;
  box-shadow: 0 2px 8px var(--success-hover);
  transform: translateY(-1px);
}

/* Светлая тема - сервисные кнопки */
[data-theme="light"] .sidebar-service-button {
  background: transparent;
  color: var(--text);
  border: none !important;
  box-shadow: none;
}

[data-theme="light"] .sidebar-service-button:hover {
  background: var(--button-primary);
  color: #ffffff;
  border: none !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

[data-theme="light"] .sidebar-service-button:active:not(:disabled) {
  background: var(--button-primary);
  color: #ffffff;
  border: none !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

/* Светлая тема - кнопки проектов */
[data-theme="light"] .sidebar-project-btn {
  background: transparent;
  color: var(--text);
  border: none !important;
  box-shadow: none;
}

[data-theme="light"] .sidebar-project-btn:hover {
  background: var(--button-primary);
  color: #ffffff;
  border: none !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

[data-theme="light"] .sidebar-project-btn:active:not(:disabled) {
  background: var(--button-primary);
  color: #ffffff;
  border: none !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

/* Темная тема - сервисные кнопки */
[data-theme="dark"] .sidebar-service-button {
  background: transparent;
  color: var(--text);
  border: none !important;
  box-shadow: none;
}

[data-theme="dark"] .sidebar-service-button:hover {
  background: var(--button-primary);
  color: #ffffff;
  border: none !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

/* Активные состояния сервисных кнопок в темной теме */
[data-theme="dark"] .sidebar-service-button:active:not(:disabled) {
  background: var(--button-primary);
  color: #ffffff;
  border: none !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

/* Темная тема - кнопки проектов */
[data-theme="dark"] .sidebar-project-btn {
  background: transparent;
  color: var(--text);
  border: none !important;
  box-shadow: none;
}

[data-theme="dark"] .sidebar-project-btn:hover {
  background: var(--button-primary);
  color: #ffffff;
  border: none !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

[data-theme="dark"] .sidebar-project-btn:active:not(:disabled) {
  background: var(--button-primary);
  color: #ffffff;
  border: none !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

.sidebar-service-button:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

.sidebar-service-button:focus {
  outline: none !important;
  box-shadow: none !important;
}

.sidebar-service-button.active {
  background: var(--button-primary);
  color: var(--button-primary-text);
  border: none !important;
  box-shadow: 0 2px 8px var(--success-hover);
}

.sidebar-service-button.active .service-title,
.sidebar-service-button.active .service-description {
  color: var(--button-primary-text) !important;
}

.sidebar-service-button .icon {
  width: 20px;
  height: 20px;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.sidebar-service-button:hover .icon {
  transform: scale(1.05);
}

/* Убеждаемся что hover эффект применяется ко всем дочерним элементам */
.sidebar-service-button:hover * {
  color: inherit;
}

/* Убираем браузерные обводки у всех элементов сайдбара */
.sidebar-service-button,
.sidebar-project-btn,
.sidebar-footer-button,
.sidebar-create-button,
.sidebar-nav-item,
.sidebar-service-item {
  outline: none !important;
  -webkit-tap-highlight-color: transparent !important;
}

.sidebar-service-button:focus,
.sidebar-project-btn:focus,
.sidebar-footer-button:focus,
.sidebar-create-button:focus,
.sidebar-nav-item:focus,
.sidebar-service-item:focus {
  outline: none !important;
  box-shadow: none !important;
}

.sidebar-service-button .service-content {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
  align-items: flex-start;
}

.sidebar-service-button .service-title {
  font-weight: 500;
  font-size: 0.875rem;
  line-height: 1.2;
  text-align: left;
}

.sidebar-service-button .service-description {
  font-size: 0.75rem;
  opacity: 0.7;
  line-height: 1.2;
}

/* Компактный режим для сервисных кнопок (только для развернутой панели) */
.sidebar-main-container:not(.collapsed) .sidebar-service-button.compact {
  padding: 10px 12px;
  min-height: 40px;
  gap: 8px;
}

.sidebar-main-container:not(.collapsed) .sidebar-service-button.compact .icon {
  width: 18px;
  height: 18px;
}

.sidebar-main-container:not(.collapsed) .sidebar-service-button.compact .service-content {
  display: none;
}

/* Стили для выпадающих элементов сервисов */
.sidebar-service-dropdown {
  margin-top: 6px;
  padding: 0 2px;
  padding-left: 8px; /* Дополнительный отступ для иерархии */
  border-left: 2px solid var(--border); /* Вертикальная линия для визуализации вложенности */
  border-radius: 0 0 0 4px; /* Скругление левого угла */
}

/* Отступ слева только для развернутого вида */
.sidebar-main-container:not(.collapsed) .sidebar-service-dropdown {
  margin-left: 12px; /* Отступ слева для визуальной вложенности только в развернутом виде */
}


/* Стили для dropdown элементов только в развернутой панели */
.sidebar-main-container:not(.collapsed) .sidebar-service-dropdown .sidebar-service-item {
  background: var(--card-bg);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 8px; /* Уменьшенный радиус как у инструментов */
  padding: 8px 12px; /* Уменьшенный padding как у SidebarTool */
  transition: all 0.2s ease;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px; /* Уменьшенный gap */
  width: auto;
  max-width: 180px; /* Уменьшенная максимальная ширина */
  margin-bottom: 4px;
  min-height: 36px; /* Уменьшенная высота как у инструментов */
  font-size: 0.75rem; /* Размер шрифта как у SidebarTool */
}

/* ===== ERROR BOUNDARY ===== */
.error-boundary {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: 2rem;
  background: var(--background-primary);
}

.error-boundary__container {
  max-width: 500px;
  text-align: center;
  padding: 2rem;
  background: var(--background-secondary);
  border-radius: 12px;
  box-shadow: var(--shadow-lg);
  border: 1px solid var(--border-primary);
}

.error-boundary__icon {
  font-size: 3rem;
  margin-bottom: 1rem;
}

.error-boundary__title {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 1rem;
}

.error-boundary__message {
  color: var(--text-secondary);
  margin-bottom: 2rem;
  line-height: 1.5;
}

.error-boundary__actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
  flex-wrap: wrap;
}

.error-boundary__button {
  padding: 0.75rem 1.5rem;
  border-radius: 8px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
  font-size: 0.875rem;
}

.error-boundary__button--primary {
  background: var(--accent-primary);
  color: var(--accent-primary-text);
}

.error-boundary__button--primary:hover {
  background: var(--accent-primary-hover);
  transform: translateY(-1px);
}

.error-boundary__button--secondary {
  background: var(--background-tertiary);
  color: var(--text-primary);
  border: 1px solid var(--border-primary);
}

.error-boundary__button--secondary:hover {
  background: var(--background-hover);
  transform: translateY(-1px);
}

.error-boundary__details {
  margin-top: 2rem;
  text-align: left;
  background: var(--background-tertiary);
  border-radius: 8px;
  padding: 1rem;
  border: 1px solid var(--border-primary);
}

.error-boundary__details summary {
  cursor: pointer;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 0.5rem;
}

.error-boundary__stack,
.error-boundary__component-stack {
  background: var(--background-primary);
  padding: 1rem;
  border-radius: 6px;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.75rem;
  color: var(--text-secondary);
  overflow-x: auto;
  white-space: pre-wrap;
  word-break: break-all;
  border: 1px solid var(--border-primary);
  margin-top: 0.5rem;
}

.error-boundary__component-stack {
  margin-top: 1rem;
}

/* ===== LOADING SPINNER ===== */
.loading-spinner {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  min-height: 200px;
}

.loading-spinner__container {
  display: flex;
  gap: 8px;
  margin-bottom: 1rem;
}

.loading-spinner__dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--accent-primary);
  animation: loading-bounce 1.4s ease-in-out infinite both;
}

.loading-spinner__dot:nth-child(1) {
  animation-delay: -0.32s;
}

.loading-spinner__dot:nth-child(2) {
  animation-delay: -0.16s;
}

.loading-spinner__text {
  color: var(--text-secondary);
  font-size: 0.875rem;
  margin: 0;
}

@keyframes loading-bounce {
  0%, 80%, 100% {
    transform: scale(0);
    opacity: 0.5;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Hover и active стили для dropdown элементов только в развернутой панели */
.sidebar-main-container:not(.collapsed) .sidebar-service-dropdown .sidebar-service-item:hover:not(.active) {
  background: var(--button-primary);
  color: #ffffff;
  border-color: var(--border);
  box-shadow: 0 2px 8px var(--success-hover);
  transform: translateY(-1px);
}

.sidebar-main-container:not(.collapsed) .sidebar-service-dropdown .sidebar-service-item.active {
  background: var(--button-primary) !important;
  color: var(--button-primary-text) !important;
  border-color: var(--border) !important;
  box-shadow: 0 2px 8px var(--success-hover) !important;
}

.sidebar-main-container:not(.collapsed) .sidebar-service-dropdown .sidebar-service-item.active:hover {
  background: var(--button-primary) !important;
  color: var(--button-primary-text) !important;
  border-color: var(--border) !important;
  box-shadow: 0 4px 12px var(--success-hover) !important;
  transform: translateY(-1px);
}

.sidebar-service-dropdown .sidebar-service-item.active .service-title,
.sidebar-service-dropdown .sidebar-service-item.active .service-description {
  color: var(--button-primary-text) !important;
}

.sidebar-service-dropdown .sidebar-service-item .icon {
  width: 14px; /* Уменьшенный размер как у инструментов */
  height: 14px; /* Уменьшенный размер как у инструментов */
  transition: all 0.2s ease;
}

.sidebar-service-dropdown .sidebar-service-item:hover .icon {
  transform: scale(1.1);
}

/* Ограничение высоты области проектов - увеличиваем до низа */
.workspace-content-limited {
  max-height: calc(100vh - 120px); /* Увеличиваем до низа экрана с небольшим отступом */
  overflow-y: auto;
}

/* ========================================
   СПЕЦИАЛЬНЫЕ ПРАВИЛА ДЛЯ ТЕМНОЙ ТЕМЫ - БЕЛЫЙ ТЕКСТ
   ======================================== */

/* Белый текст для всех элементов сайдбара в темной теме */
[data-theme="dark"] .sidebar-nav-item,
[data-theme="dark"] .sidebar-service-item,
[data-theme="dark"] .sidebar-project-item,
[data-theme="dark"] .sidebar-service-button,
[data-theme="dark"] .sidebar-footer-button {
  color: var(--text) !important;
}

[data-theme="dark"] .sidebar-nav-text,
[data-theme="dark"] .sidebar-service-name,
[data-theme="dark"] .sidebar-project-title,
[data-theme="dark"] .sidebar-service-button .service-title,
[data-theme="dark"] .sidebar-service-button .service-description {
  color: var(--text) !important;
}

/* Белый текст для workspace элементов в темной теме */
[data-theme="dark"] .workspace-item h4,
[data-theme="dark"] .workspace-item .text-primary,
[data-theme="dark"] .workspace-item .text-secondary,
[data-theme="dark"] .workspace-item .text-muted {
  color: var(--text) !important;
}

[data-theme="dark"] .workspace-item .text-secondary {
  color: #cccccc !important;
}

[data-theme="dark"] .workspace-item .text-muted {
  color: #999999 !important;
}

/* Темные рамки для workspace элементов в темной теме */
[data-theme="dark"] .workspace-item {
  border-color: rgba(255, 255, 255, 0.15) !important;
  background: rgba(0, 0, 0, 0.2) !important;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;
}

[data-theme="dark"] .workspace-item:hover {
  border-color: rgba(255, 255, 255, 0.25) !important;
  background: rgba(0, 0, 0, 0.3) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4) !important;
}

[data-theme="dark"] .workspace-item.border-primary {
  border-color: var(--primary) !important;
  background: rgba(var(--primary-rgb), 0.15) !important;
}

/* Темные рамки для компактных элементов */
[data-theme="dark"] .group.relative.transition-all.cursor-pointer.rounded-md.border {
  border-color: rgba(255, 255, 255, 0.15) !important;
  background: rgba(0, 0, 0, 0.2) !important;
}

[data-theme="dark"] .group.relative.transition-all.cursor-pointer.rounded-md.border:hover {
  border-color: rgba(255, 255, 255, 0.25) !important;
  background: rgba(0, 0, 0, 0.3) !important;
}

[data-theme="dark"] .group.relative.transition-all.cursor-pointer.rounded-md.border.border-primary {
  border-color: var(--primary) !important;
  background: rgba(var(--primary-rgb), 0.15) !important;
}

/* Дополнительные стили для лучшей видимости в темной теме */
[data-theme="dark"] .workspace-grid {
  background: rgba(0, 0, 0, 0.1);
  border-radius: 8px;
  padding: 8px;
}

[data-theme="dark"] .workspace-item .text-muted-foreground {
  color: rgba(255, 255, 255, 0.6) !important;
}

[data-theme="dark"] .workspace-item .text-foreground {
  color: rgba(255, 255, 255, 0.9) !important;
}

[data-theme="dark"] .sidebar-nav-icon,
[data-theme="dark"] .sidebar-service-item .icon,
[data-theme="dark"] .sidebar-service-button .icon {
  color: var(--text) !important;
}

[data-theme="dark"] .sidebar-services-title,
[data-theme="dark"] .sidebar-service-description {
  color: var(--text) !important;
}

[data-theme="dark"] .workspace-item.border-primary {
  border-color: var(--primary) !important;
  background: rgba(var(--primary-rgb), 0.15) !important;
}

/* Темные рамки для компактных элементов */
[data-theme="dark"] .group.relative.transition-all.cursor-pointer.rounded-md.border {
  border-color: rgba(255, 255, 255, 0.15) !important;
  background: rgba(0, 0, 0, 0.2) !important;
}

[data-theme="dark"] .group.relative.transition-all.cursor-pointer.rounded-md.border:hover {
  border-color: rgba(255, 255, 255, 0.25) !important;
  background: rgba(0, 0, 0, 0.3) !important;
}

[data-theme="dark"] .group.relative.transition-all.cursor-pointer.rounded-md.border.border-primary {
  border-color: var(--primary) !important;
  background: rgba(var(--primary-rgb), 0.15) !important;
}

/* Дополнительные стили для лучшей видимости в темной теме */
[data-theme="dark"] .workspace-grid {
  background: rgba(0, 0, 0, 0.1);
  border-radius: 8px;
  padding: 8px;
}

[data-theme="dark"] .workspace-item .text-muted-foreground {
  color: rgba(255, 255, 255, 0.6) !important;
}

[data-theme="dark"] .workspace-item .text-foreground {
  color: rgba(255, 255, 255, 0.9) !important;
}

[data-theme="dark"] .sidebar-nav-icon,
[data-theme="dark"] .sidebar-service-item .icon,
[data-theme="dark"] .sidebar-service-button .icon {
  color: var(--text) !important;
}

[data-theme="dark"] .sidebar-services-title,
[data-theme="dark"] .sidebar-service-description {
  color: var(--text) !important;
}
/* ========================================
   КНОПКИ OZON MANAGER - В СТИЛЕ САЙДБАРА
   ======================================== */

/* Базовые кнопки Ozon Manager */
.ozon-button {
  background: var(--card-bg);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 10px 16px;
  font-weight: 500;
  transition: all 0.2s ease;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  min-height: 40px;
  font-size: 14px;
  line-height: 1.4;
}

.ozon-button:hover {
  background: var(--button-primary); /* Зеленый */
  color: #ffffff !important; /* Белый текст в темной теме */
  border-color: var(--button-primary);
  box-shadow: 0 2px 8px var(--success-hover); /* Зеленая тень */
  transform: translateY(-1px);
}

.ozon-button:active:not(:disabled) {
  background: var(--button-primary);
  color: #ffffff !important;
  transform: translateY(0);
}

.ozon-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Первичная кнопка Ozon (для главных действий) */
.ozon-button-primary {
  background: var(--button-primary);
  color: #ffffff !important;
  border: 1px solid var(--button-primary);
}

.ozon-button-primary:hover {
  background: var(--success-hover);
  border-color: var(--success-hover);
  box-shadow: 0 4px 12px var(--success-hover);
}

/* Опасная кнопка (удаление, остановка) */
.ozon-button-danger {
  background: #dc2626;
  color: #ffffff !important;
  border: 1px solid #dc2626;
}

.ozon-button-danger:hover {
  background: #b91c1c;
  border-color: #b91c1c;
  box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
}

/* Темная тема для кнопок Ozon */
[data-theme="dark"] .ozon-button {
  background: var(--card-bg);
  color: var(--text);
  border-color: var(--border);
}

[data-theme="dark"] .ozon-button:hover {
  background: var(--button-primary);
  color: #ffffff !important;
  border-color: var(--button-primary);
}

[data-theme="dark"] .ozon-button-primary {
  background: var(--button-primary);
  color: #ffffff !important;
  border-color: var(--button-primary);
}

[data-theme="dark"] .ozon-button-danger {
  background: #dc2626;
  color: #ffffff !important;
  border-color: #dc2626;
}
