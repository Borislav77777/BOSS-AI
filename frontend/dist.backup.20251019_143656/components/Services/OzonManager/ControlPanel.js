import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import React from 'react';
/**
 * Панель управления операциями
 * Воспроизводит функционал из Python gui.py (строки 685-707)
 */
export const ControlPanel = ({ stores, selectedStores, onStoreSelectionChange, onRunPromotions, onRunUnarchive, onRunAll, onStop, operationStatus }) => {
    const handleStoreToggle = (storeName) => {
        if (selectedStores.includes(storeName)) {
            onStoreSelectionChange(selectedStores.filter(s => s !== storeName));
        }
        else {
            onStoreSelectionChange([...selectedStores, storeName]);
        }
    };
    const handleSelectAll = () => {
        onStoreSelectionChange(stores);
    };
    const handleSelectNone = () => {
        onStoreSelectionChange([]);
    };
    return (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsx("h2", { className: "text-xl font-semibold text-var-text", children: "\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u044F\u043C\u0438" }), _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("button", { onClick: handleSelectAll, className: "unified-button unified-button-secondary", children: "\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0435" }), _jsx("button", { onClick: handleSelectNone, className: "unified-button unified-button-secondary", children: "\u0421\u043D\u044F\u0442\u044C \u0432\u0441\u0435" })] })] }), _jsxs("div", { className: "bg-white rounded-lg shadow p-6", children: [_jsx("h3", { className: "text-lg font-medium mb-4 text-var-text", children: "\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u044B \u0434\u043B\u044F \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0439" }), stores.length === 0 ? (_jsx("p", { className: "text-var-text-muted", children: "\u041D\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0445 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432" })) : (_jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3", children: stores.map((storeName) => (_jsxs("label", { className: "flex items-center space-x-3 p-3 border rounded-lg hover:bg-surface-hover", children: [_jsx("input", { type: "checkbox", checked: selectedStores.includes(storeName), onChange: () => handleStoreToggle(storeName), className: "w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" }), _jsx("span", { className: "text-sm font-medium text-var-text", children: storeName })] }, storeName))) })), selectedStores.length > 0 && (_jsxs("div", { className: "mt-4 p-3 bg-blue-50 rounded-lg", children: [_jsxs("p", { className: "text-sm text-blue-800", children: ["\u0412\u044B\u0431\u0440\u0430\u043D\u043E \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432: ", selectedStores.length, " \u0438\u0437 ", stores.length] }), _jsx("p", { className: "text-xs text-blue-600 mt-1", children: selectedStores.join(', ') })] }))] }), _jsxs("div", { className: "bg-white rounded-lg shadow p-6", children: [_jsx("h3", { className: "text-lg font-medium mb-4 text-var-text", children: "\u041E\u043F\u0435\u0440\u0430\u0446\u0438\u0438" }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [_jsx("div", { className: "space-y-3", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("h4", { className: "font-medium text-var-text", children: "\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0438\u0437 \u0430\u043A\u0446\u0438\u0439" }), _jsx("p", { className: "text-sm text-var-text-muted", children: "\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0442\u043E\u0432\u0430\u0440\u043E\u0432 \u0438\u0437 \u043D\u0435\u0432\u044B\u0433\u043E\u0434\u043D\u044B\u0445 \u0430\u043A\u0446\u0438\u0439" })] }), _jsx("button", { onClick: onRunPromotions, disabled: selectedStores.length === 0 || operationStatus.isRunning, className: "unified-button unified-button-primary", children: "\u0417\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C" })] }) }), _jsx("div", { className: "space-y-3", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("h4", { className: "font-medium text-var-text", children: "\u0420\u0430\u0437\u0430\u0440\u0445\u0438\u0432\u0430\u0446\u0438\u044F" }), _jsx("p", { className: "text-sm text-var-text-muted", children: "\u0418\u0437\u0432\u043B\u0435\u0447\u0435\u043D\u0438\u0435 \u0442\u043E\u0432\u0430\u0440\u043E\u0432 \u0438\u0437 \u0430\u0432\u0442\u043E\u0430\u0440\u0445\u0438\u0432\u0430" })] }), _jsx("button", { onClick: onRunUnarchive, disabled: selectedStores.length === 0 || operationStatus.isRunning, className: "unified-button unified-button-primary", children: "\u0417\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C" })] }) })] }), _jsx("div", { className: "mt-6 pt-6 border-t", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("h4", { className: "font-medium text-var-text", children: "\u0412\u0441\u0435 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0438" }), _jsx("p", { className: "text-sm text-var-text-muted", children: "\u0417\u0430\u043F\u0443\u0441\u043A \u0432\u0441\u0435\u0445 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0445 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0439 \u043F\u043E\u0441\u043B\u0435\u0434\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u043D\u043E" })] }), _jsxs("div", { className: "flex space-x-2", children: [_jsx("button", { onClick: onRunAll, disabled: selectedStores.length === 0 || operationStatus.isRunning, className: "unified-button unified-button-primary", children: "\u0417\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0432\u0441\u0435" }), _jsx("button", { onClick: onStop, disabled: !operationStatus.isRunning, className: "unified-button btn-danger", children: "\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C" })] })] }) })] }), operationStatus.isRunning && (_jsx("div", { className: "bg-yellow-50 border border-yellow-200 rounded-lg p-4", children: _jsxs("div", { className: "flex items-center", children: [_jsx("div", { className: "animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-600 mr-3" }), _jsxs("div", { children: [_jsxs("p", { className: "text-sm font-medium text-yellow-800", children: ["\u0412\u044B\u043F\u043E\u043B\u043D\u044F\u0435\u0442\u0441\u044F: ", operationStatus.operation] }), _jsx("p", { className: "text-xs text-yellow-600 mt-1", children: operationStatus.message }), operationStatus.progress > 0 && (_jsx("div", { className: "mt-2 w-full bg-yellow-200 rounded-full h-2", children: _jsx("div", { className: "bg-yellow-600 h-2 rounded-full transition-all duration-300", "data-progress": operationStatus.progress }) }))] })] }) })), operationStatus.results.length > 0 && (_jsxs("div", { className: "bg-white rounded-lg shadow p-6", children: [_jsx("h3", { className: "text-lg font-medium text-foreground mb-4", children: "\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0439" }), _jsx("div", { className: "space-y-3", children: operationStatus.results.map((result, index) => {
                            const typedResult = result;
                            return (_jsxs("div", { className: "p-3 border rounded-lg", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsx("span", { className: "font-medium text-foreground", children: typedResult.store }), _jsx("span", { className: `px-2 py-1 text-xs font-semibold rounded-full ${typedResult.success
                                                    ? 'bg-green-100 text-green-800'
                                                    : 'bg-red-100 text-red-800'}`, children: typedResult.success ? 'Успешно' : 'Ошибка' })] }), typedResult.success && (_jsxs("div", { className: "mt-2 text-sm text-secondary", children: [typedResult.products_removed !== undefined && (_jsxs("p", { children: ["\u0423\u0434\u0430\u043B\u0435\u043D\u043E \u0442\u043E\u0432\u0430\u0440\u043E\u0432: ", typedResult.products_removed] })), typedResult.actions_processed !== undefined && (_jsxs("p", { children: ["\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u043D\u043E \u0430\u043A\u0446\u0438\u0439: ", typedResult.actions_processed] })), typedResult.total_unarchived !== undefined && (_jsxs("p", { children: ["\u0420\u0430\u0437\u0430\u0440\u0445\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D\u043E: ", typedResult.total_unarchived] })), typedResult.cycles_completed !== undefined && (_jsxs("p", { children: ["\u0426\u0438\u043A\u043B\u043E\u0432: ", typedResult.cycles_completed] }))] })), !typedResult.success && typedResult.error && (_jsx("p", { className: "mt-2 text-sm text-red-600", children: typedResult.error }))] }, index));
                        }) })] }))] }));
};
//# sourceMappingURL=ControlPanel.js.map