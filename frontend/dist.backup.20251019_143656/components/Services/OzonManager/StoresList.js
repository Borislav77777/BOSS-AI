import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import React, { useState } from 'react';
/**
 * Список магазинов с таблицей
 * Воспроизводит функционал из Python gui.py (строки 761-792)
 */
export const StoresList = ({ stores, onAddStore, onEditStore, onDeleteStore, onRefresh, onTestConnection, isLoading }) => {
    const [testingConnections, setTestingConnections] = useState(new Set());
    const handleTestConnection = async (storeName) => {
        setTestingConnections(prev => new Set(prev).add(storeName));
        await onTestConnection(storeName);
        setTestingConnections(prev => {
            const newSet = new Set(prev);
            newSet.delete(storeName);
            return newSet;
        });
    };
    return (_jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsx("h2", { className: "text-xl font-semibold text-foreground", children: "\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B Ozon" }), _jsxs("div", { className: "flex space-x-2", children: [_jsx("button", { onClick: onRefresh, disabled: isLoading, className: "unified-button unified-button-secondary", children: isLoading ? 'Обновление...' : 'Обновить' }), _jsx("button", { onClick: onAddStore, className: "unified-button unified-button-primary", children: "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D" })] })] }), _jsx("div", { className: "bg-white rounded-lg shadow overflow-hidden", children: _jsx("div", { className: "overflow-x-auto", children: _jsxs("table", { className: "min-w-full divide-y divide-gray-200", children: [_jsx("thead", { className: "bg-surface", children: _jsxs("tr", { children: [_jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-secondary uppercase tracking-wider", children: "\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435" }), _jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-secondary uppercase tracking-wider", children: "Client ID" }), _jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-secondary uppercase tracking-wider", children: "\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0438\u0437 \u0430\u043A\u0446\u0438\u0439" }), _jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-secondary uppercase tracking-wider", children: "\u0420\u0430\u0437\u0430\u0440\u0445\u0438\u0432\u0430\u0446\u0438\u044F" }), _jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-secondary uppercase tracking-wider", children: "\u0420\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u0435" }), _jsx("th", { className: "px-6 py-3 text-left text-xs font-medium text-secondary uppercase tracking-wider", children: "\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F" })] }) }), _jsx("tbody", { className: "bg-white divide-y divide-gray-200", children: stores.length === 0 ? (_jsx("tr", { children: _jsx("td", { colSpan: 6, className: "px-6 py-12 text-center text-secondary", children: "\u041D\u0435\u0442 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432" }) })) : (stores.map((store) => (_jsxs("tr", { className: "hover:bg-surface-hover", children: [_jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: _jsx("div", { className: "text-sm font-medium text-foreground", children: store.name }) }), _jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: _jsxs("div", { className: "text-sm text-secondary", children: [store.client_id.substring(0, 8), "..."] }) }), _jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: _jsx("span", { className: `inline-flex px-2 py-1 text-xs font-semibold rounded-full ${store.remove_from_promotions
                                                    ? 'bg-green-100 text-green-800'
                                                    : 'bg-gray-100 text-gray-800'}`, children: store.remove_from_promotions ? 'Включено' : 'Отключено' }) }), _jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: _jsx("span", { className: `inline-flex px-2 py-1 text-xs font-semibold rounded-full ${store.unarchive_enabled
                                                    ? 'bg-green-100 text-green-800'
                                                    : 'bg-gray-100 text-gray-800'}`, children: store.unarchive_enabled ? 'Включено' : 'Отключено' }) }), _jsx("td", { className: "px-6 py-4 whitespace-nowrap", children: _jsxs("div", { className: "text-sm text-secondary", children: [_jsxs("div", { children: ["\u0410\u043A\u0446\u0438\u0438: ", store.schedule_times.remove] }), _jsxs("div", { children: ["\u0410\u0440\u0445\u0438\u0432: ", store.schedule_times.unarchive] })] }) }), _jsx("td", { className: "px-6 py-4 whitespace-nowrap text-sm font-medium", children: _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("button", { onClick: () => handleTestConnection(store.name), disabled: testingConnections.has(store.name), className: "unified-button unified-button-secondary", children: testingConnections.has(store.name) ? 'Тест...' : 'Тест' }), _jsx("button", { onClick: () => onEditStore(store), className: "unified-button unified-button-secondary", children: "\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C" }), _jsx("button", { onClick: () => onDeleteStore(store.name), className: "unified-button btn-danger", children: "\u0423\u0434\u0430\u043B\u0438\u0442\u044C" })] }) })] }, store.name)))) })] }) }) }), stores.length > 0 && (_jsx("div", { className: "bg-surface px-4 py-3 rounded-md", children: _jsxs("div", { className: "flex items-center justify-between text-sm text-secondary", children: [_jsxs("span", { children: ["\u0412\u0441\u0435\u0433\u043E \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432: ", stores.length] }), _jsxs("div", { className: "flex space-x-4", children: [_jsxs("span", { children: ["\u0421 \u0430\u043A\u0446\u0438\u044F\u043C\u0438: ", stores.filter(s => s.remove_from_promotions).length] }), _jsxs("span", { children: ["\u0421 \u0440\u0430\u0437\u0430\u0440\u0445\u0438\u0432\u0430\u0446\u0438\u0435\u0439: ", stores.filter(s => s.unarchive_enabled).length] })] })] }) }))] }));
};
//# sourceMappingURL=StoresList.js.map