import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import React, { useEffect, useState } from 'react';
/**
 * Панель управления планировщиком
 * Воспроизводит функционал из Python gui.py (строки 709-718)
 */
export const SchedulerPanel = ({ onReloadSchedule, isLoading }) => {
    const [schedulerStatus, setSchedulerStatus] = useState({
        isRunning: false,
        tasksCount: 0,
        tasks: []
    });
    const [nextExecution, setNextExecution] = useState(null);
    // Загружаем статус планировщика
    useEffect(() => {
        loadSchedulerStatus();
    }, []);
    const loadSchedulerStatus = async () => {
        try {
            // Имитируем загрузку статуса (в реальности будет API вызов)
            await new Promise(resolve => setTimeout(resolve, 1000));
            // Случайные данные для демонстрации
            setSchedulerStatus({
                isRunning: Math.random() > 0.5,
                tasksCount: Math.floor(Math.random() * 5),
                tasks: ['store1_promotions', 'store1_unarchive', 'store2_promotions']
            });
            // Случайное время следующего выполнения
            const now = new Date();
            const nextTime = new Date(now.getTime() + Math.random() * 24 * 60 * 60 * 1000);
            setNextExecution(nextTime.toLocaleString('ru-RU'));
        }
        catch (error) {
            console.error('Ошибка загрузки статуса планировщика:', error);
        }
    };
    const handleReloadSchedule = async () => {
        await onReloadSchedule();
        await loadSchedulerStatus();
    };
    return (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsx("h2", { className: "text-xl font-semibold text-var-text", children: "\u041F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0449\u0438\u043A \u0437\u0430\u0434\u0430\u0447" }), _jsx("button", { onClick: handleReloadSchedule, disabled: isLoading, className: "unified-button unified-button-primary", children: isLoading ? 'Перезагрузка...' : 'Перезагрузить расписание' })] }), _jsxs("div", { className: "bg-white rounded-lg shadow p-6", children: [_jsx("h3", { className: "text-lg font-medium text-foreground mb-4", children: "\u0421\u0442\u0430\u0442\u0443\u0441 \u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0449\u0438\u043A\u0430" }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [_jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsx("span", { className: "text-sm font-medium text-foreground", children: "\u0421\u0442\u0430\u0442\u0443\u0441:" }), _jsx("span", { className: `inline-flex px-2 py-1 text-xs font-semibold rounded-full ${schedulerStatus.isRunning
                                                    ? 'bg-green-100 text-green-800'
                                                    : 'bg-red-100 text-red-800'}`, children: schedulerStatus.isRunning ? 'Запущен' : 'Остановлен' })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsx("span", { className: "text-sm font-medium text-foreground", children: "\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0445 \u0437\u0430\u0434\u0430\u0447:" }), _jsx("span", { className: "text-sm text-foreground", children: schedulerStatus.tasksCount })] }), nextExecution && (_jsxs("div", { className: "flex items-center justify-between", children: [_jsx("span", { className: "text-sm font-medium text-foreground", children: "\u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u0435:" }), _jsx("span", { className: "text-sm text-foreground", children: nextExecution })] }))] }), _jsxs("div", { children: [_jsx("h4", { className: "text-sm font-medium text-foreground mb-2", children: "\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0435 \u0437\u0430\u0434\u0430\u0447\u0438:" }), schedulerStatus.tasks.length === 0 ? (_jsx("p", { className: "text-sm text-secondary", children: "\u041D\u0435\u0442 \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0445 \u0437\u0430\u0434\u0430\u0447" })) : (_jsx("div", { className: "space-y-2", children: schedulerStatus.tasks.map((task, index) => (_jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("div", { className: "w-2 h-2 bg-green-400 rounded-full" }), _jsx("span", { className: "text-sm text-foreground", children: task })] }, index))) }))] })] })] }), _jsxs("div", { className: "bg-blue-50 rounded-lg p-4", children: [_jsx("h4", { className: "text-sm font-medium text-blue-900 mb-2", children: "\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0449\u0438\u043A\u0435" }), _jsxs("div", { className: "text-sm text-blue-800 space-y-1", children: [_jsx("p", { children: "\u2022 \u041F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0449\u0438\u043A \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0432\u044B\u043F\u043E\u043B\u043D\u044F\u0435\u0442 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0438 \u043F\u043E \u0440\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u044E" }), _jsx("p", { children: "\u2022 \u0412\u0440\u0435\u043C\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F \u043D\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044F \u0434\u043B\u044F \u043A\u0430\u0436\u0434\u043E\u0433\u043E \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430 \u043E\u0442\u0434\u0435\u043B\u044C\u043D\u043E" }), _jsx("p", { children: "\u2022 \u041E\u043F\u0435\u0440\u0430\u0446\u0438\u0438 \u0432\u044B\u043F\u043E\u043B\u043D\u044F\u044E\u0442\u0441\u044F \u0432 \u0444\u043E\u043D\u043E\u0432\u043E\u043C \u0440\u0435\u0436\u0438\u043C\u0435" }), _jsx("p", { children: "\u2022 \u041B\u043E\u0433\u0438 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0439 \u0441\u043E\u0445\u0440\u0430\u043D\u044F\u044E\u0442\u0441\u044F \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0435" })] })] }), _jsxs("div", { className: "bg-white rounded-lg shadow p-6", children: [_jsx("h3", { className: "text-lg font-medium mb-4 text-var-text", children: "\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435" }), _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("h4", { className: "font-medium text-var-text", children: "\u041F\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0440\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u044F" }), _jsx("p", { className: "text-sm text-var-text-muted", children: "\u041F\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 \u0440\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0434\u043B\u044F \u0432\u0441\u0435\u0445 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u043E\u0432" })] }), _jsx("button", { onClick: handleReloadSchedule, disabled: isLoading, className: "unified-button unified-button-primary", children: isLoading ? 'Перезагрузка...' : 'Перезагрузить' })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("h4", { className: "font-medium text-var-text", children: "\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441" }), _jsx("p", { className: "text-sm text-var-text-muted", children: "\u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u0442 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E \u043E \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0438 \u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0449\u0438\u043A\u0430" })] }), _jsx("button", { onClick: loadSchedulerStatus, className: "unified-button unified-button-secondary", children: "\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C" })] })] })] }), _jsxs("div", { className: "bg-gray-50 rounded-lg p-4", children: [_jsx("h4", { className: "text-sm font-medium mb-2 text-foreground", children: "\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430" }), _jsxs("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4 text-sm", children: [_jsxs("div", { className: "text-center", children: [_jsx("div", { className: "text-lg font-semibold text-foreground", children: schedulerStatus.tasksCount }), _jsx("div", { className: "text-secondary", children: "\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0445 \u0437\u0430\u0434\u0430\u0447" })] }), _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "text-lg font-semibold text-foreground", children: schedulerStatus.isRunning ? 'Да' : 'Нет' }), _jsx("div", { className: "text-secondary", children: "\u041F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0449\u0438\u043A" })] }), _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "text-lg font-semibold text-foreground", children: "24/7" }), _jsx("div", { className: "text-secondary", children: "\u0420\u0435\u0436\u0438\u043C \u0440\u0430\u0431\u043E\u0442\u044B" })] }), _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "text-lg font-semibold text-foreground", children: "\u0410\u0432\u0442\u043E" }), _jsx("div", { className: "text-secondary", children: "\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435" })] })] })] })] }));
};
//# sourceMappingURL=SchedulerPanel.js.map