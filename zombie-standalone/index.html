<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zombie 3D Model - Standalone</title>
    <meta name="description" content="–ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è 3D –º–æ–¥–µ–ª—å –∑–æ–º–±–∏ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏">

    <!-- Babylon.js -->
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>

    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Preloader -->
    <div id="preloader">
        <div class="loader"></div>
        <div class="loader-text">–ó–∞–≥—Ä—É–∑–∫–∞ 3D –º–æ–¥–µ–ª–∏...</div>
        <div id="loading-progress">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <span id="loading-text">0%</span>
        </div>
    </div>

    <!-- Canvas –¥–ª—è 3D -->
    <canvas id="renderCanvas"></canvas>

    <!-- UI Overlay -->
    <div id="ui-overlay">
        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="info-panel fade-in">
            <h2>Zombie 3D Model</h2>
            <p>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è 3D –º–æ–¥–µ–ª—å</p>
            <div class="controls">
                <p><strong>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong></p>
                <p>üñ±Ô∏è –õ–ö–ú + –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ - –≤—Ä–∞—â–µ–Ω–∏–µ</p>
                <p>üñ±Ô∏è –ö–æ–ª–µ—Å–æ –º—ã—à–∏ - –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ/–æ—Ç–¥–∞–ª–µ–Ω–∏–µ</p>
                <p>üñ±Ô∏è –ü–ö–ú + –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ - –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ</p>
            </div>
        </div>

        <!-- FPS Counter (—Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
        <div id="fps-counter">
            FPS: <span id="fps-value">60</span>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è -->
    <script src="js/config.js"></script>

    <!-- –ú–æ–¥—É–ª–∏ -->
    <script src="js/scene.js"></script>
    <script src="js/animations.js"></script>
    <script src="js/particles.js"></script>

    <!-- –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç -->
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let bossAIScene = null;
        let bossAIAnimations = null;
        let bossAIParticles = null;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ Zombie 3D Model Initializing...');

            // –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ü–µ–Ω—ã
            bossAIScene = new BossAIScene('renderCanvas');

            // –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏
            window.addEventListener('bossai:modelLoaded', (event) => {
                const logoMesh = event.detail.mesh;
                console.log('‚úì Model loaded, starting animations and particles');

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–π
                bossAIAnimations = new BossAIAnimations(
                    bossAIScene.getScene(),
                    logoMesh
                );

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–∞—Å—Ç–∏—Ü
                bossAIParticles = new BossAIParticles(
                    bossAIScene.getScene(),
                    logoMesh
                );

                // –°–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–ª–æ–∞–¥–µ—Ä–∞
                hidePreloader();

                console.log('‚úì Zombie 3D Model fully initialized');
            });

            // FPS Counter (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            if (BOSS_AI_CONFIG.ui.showFPS) {
                setupFPSCounter();
            }
        });

        /**
         * –°–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–ª–æ–∞–¥–µ—Ä–∞
         */
        function hidePreloader() {
            const preloader = document.getElementById('preloader');
            const minDisplayTime = BOSS_AI_CONFIG.ui.preloader.minDisplayTime;

            setTimeout(() => {
                preloader.classList.add('hidden');
                setTimeout(() => {
                    preloader.style.display = 'none';
                }, 500);
            }, minDisplayTime);
        }

        /**
         * –ù–∞—Å—Ç—Ä–æ–π–∫–∞ FPS —Å—á–µ—Ç—á–∏–∫–∞
         */
        function setupFPSCounter() {
            const fpsCounter = document.getElementById('fps-counter');
            const fpsValue = document.getElementById('fps-value');
            fpsCounter.classList.add('visible');

            setInterval(() => {
                if (bossAIScene) {
                    const fps = bossAIScene.getEngine().getFps().toFixed(0);
                    fpsValue.textContent = fps;
                }
            }, 1000);
        }

        /**
         * –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
         */
        window.addEventListener('error', (event) => {
            console.error('‚ùå Error:', event.error);
        });

        window.addEventListener('unhandledrejection', (event) => {
            console.error('‚ùå Unhandled rejection:', event.reason);
        });

        // –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
        window.ZOMBIE_3D = {
            scene: () => bossAIScene,
            animations: () => bossAIAnimations,
            particles: () => bossAIParticles,
            config: BOSS_AI_CONFIG
        };

        console.log('üí° Tip: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ window.ZOMBIE_3D –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API –≤ –∫–æ–Ω—Å–æ–ª–∏');
    </script>
</body>
</html>
